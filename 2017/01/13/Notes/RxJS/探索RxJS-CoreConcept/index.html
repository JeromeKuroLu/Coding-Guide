<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Table of Contents  generated with DocToc

探索 RxJS - Core Concept
Steam in ReactiveX
Quick Intro
主要运用场景
含有异步请求和事件触发的混合流
处理一系列的异步请求队列






探索 RxJS - Core ConceptSteam in ReactiveX
ReactiveX，又称 Reacti">
<meta property="og:type" content="article">
<meta property="og:title" content="探索RxJS-CoreConcept">
<meta property="og:url" content="http://ecmadao.com/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/index.html">
<meta property="og:site_name" content="ecmadao">
<meta property="og:description" content="Table of Contents  generated with DocToc

探索 RxJS - Core Concept
Steam in ReactiveX
Quick Intro
主要运用场景
含有异步请求和事件触发的混合流
处理一系列的异步请求队列






探索 RxJS - Core ConceptSteam in ReactiveX
ReactiveX，又称 Reacti">
<meta property="og:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/Rx.png">
<meta property="og:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/everything is a steam.jpg">
<meta property="og:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/multiple click steam.png">
<meta property="og:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/click steam.png">
<meta property="og:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/click steam filtered.png">
<meta property="og:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/flatMapLatest.png">
<meta property="og:updated_time" content="2017-01-14T13:18:58.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="探索RxJS-CoreConcept">
<meta name="twitter:description" content="Table of Contents  generated with DocToc

探索 RxJS - Core Concept
Steam in ReactiveX
Quick Intro
主要运用场景
含有异步请求和事件触发的混合流
处理一系列的异步请求队列






探索 RxJS - Core ConceptSteam in ReactiveX
ReactiveX，又称 Reacti">
<meta name="twitter:image" content="http://ecmadao.com/Coding-Guide/images/RxJS/Rx.png">
    
    
        
          
              <link rel="shortcut icon" href="/Coding-Guide/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/Coding-Guide/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/Coding-Guide/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>探索RxJS-CoreConcept</title>
    <!-- styles -->
    <link rel="stylesheet" href="/Coding-Guide/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/Coding-Guide/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/Coding-Guide/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/Coding-Guide/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/Coding-Guide/lib/jquery/jquery.min.js"></script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/ecmadao">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-Observable/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-做一个github小应用/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&text=探索RxJS-CoreConcept"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&is_video=false&description=探索RxJS-CoreConcept"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=探索RxJS-CoreConcept&body=Check out this article: http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&name=探索RxJS-CoreConcept&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#探索-RxJS-Core-Concept"><span class="toc-number">1.</span> <span class="toc-text">探索 RxJS - Core Concept</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Steam-in-ReactiveX"><span class="toc-number">1.1.</span> <span class="toc-text">Steam in ReactiveX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quick-Intro"><span class="toc-number">1.2.</span> <span class="toc-text">Quick Intro</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主要运用场景"><span class="toc-number">1.3.</span> <span class="toc-text">主要运用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#含有异步请求和事件触发的混合流"><span class="toc-number">1.3.1.</span> <span class="toc-text">含有异步请求和事件触发的混合流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#处理一系列的异步请求队列"><span class="toc-number">1.3.2.</span> <span class="toc-text">处理一系列的异步请求队列</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        探索RxJS-CoreConcept
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ecmadao</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-01-13T05:58:37.000Z" itemprop="datePublished">2017-01-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/Coding-Guide/tags/RxJS/">RxJS</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong>  <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="external">DocToc</a></em></p>
<ul>
<li><a href="#%E6%8E%A2%E7%B4%A2-rxjs---core-concept">探索 RxJS - Core Concept</a><ul>
<li><a href="#steam-in-reactivex">Steam in ReactiveX</a></li>
<li><a href="#quick-intro">Quick Intro</a></li>
<li><a href="#%E4%B8%BB%E8%A6%81%E8%BF%90%E7%94%A8%E5%9C%BA%E6%99%AF">主要运用场景</a><ul>
<li><a href="#%E5%90%AB%E6%9C%89%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E5%92%8C%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E7%9A%84%E6%B7%B7%E5%90%88%E6%B5%81">含有异步请求和事件触发的混合流</a></li>
<li><a href="#%E5%A4%84%E7%90%86%E4%B8%80%E7%B3%BB%E5%88%97%E7%9A%84%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E9%98%9F%E5%88%97">处理一系列的异步请求队列</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="探索-RxJS-Core-Concept"><a href="#探索-RxJS-Core-Concept" class="headerlink" title="探索 RxJS - Core Concept"></a>探索 RxJS - Core Concept</h2><h3 id="Steam-in-ReactiveX"><a href="#Steam-in-ReactiveX" class="headerlink" title="Steam in ReactiveX"></a>Steam in ReactiveX</h3><p><img src="/Coding-Guide/images/RxJS/Rx.png" alt="ReactiveX"></p>
<p>ReactiveX，又称 Reactive Extensions（响应式扩展），其中的 X 代表各种语言。因为它实质上只是一个事件流处理库，不需要什么其他依赖。</p>
<hr>
<p>讲一讲 ReactiveX 中的 “流”：</p>
<p>我的理解是，Rx 通过 “流” 的概念，将事件串联成一个个事件流，各个事件流之间还可进行 “并联” 的作用。当某个流上的事件被调用时，就可以触发我们设定好的监听回调。</p>
<p>那么什么样的事件可以成为流呢？答案是任何事件。无论是异步非阻塞事件（setTimeOut、网络请求等），还是同步可阻塞事件（点击事件、对迭代器的遍历等），一切都是流。此时不得不祭出一张神棍图：</p>
<p><img src="/Coding-Guide/images/RxJS/everything is a steam.jpg" alt="everything is a steam"></p>
<p>事件的串联是流。比方说，用户对一个按钮进行了猛烈的点击，所有的点击事件就是一个流；再或者，并发多个网络请求，它们也是一个流。而 Rx 的主要作用，就是为流的处理提供了一整套的解决方案：将不同的流进行组合，或者监听事件的触发及时给予响应等等。</p>
<h3 id="Quick-Intro"><a href="#Quick-Intro" class="headerlink" title="Quick Intro"></a>Quick Intro</h3><p>RxJS 的作者曾在 <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754" target="_blank" rel="external">The introduction to Reactive Programming you’ve been missing</a> 一文中详细讲解了 RxJS 的初步使用和流的概念，我们先仅看文中的一幅图来理解 Rx 的概念：</p>
<p><img src="/Coding-Guide/images/RxJS/multiple click steam.png" alt="multiple click steam"></p>
<p>这是一个多次点击事件形成的事件流，在从左往右的时间线上有很多个点击事件，而每个点击事件的时间间隔各不相同。通过 Rx 我们可以对流上的各个事件进行筛选，并获取到在某一段时间内的连续点击次数。</p>
<p>作者自己吐槽过那篇文章实在太长，所以又有了后来的这篇 <a href="https://medium.com/@andrestaltz/2-minute-introduction-to-rx-24c8ca793877" target="_blank" rel="external">2 minute introduction to Rx</a> 文章。在文章中有如下解释：</p>
<p>我们在页面上的点击事件就可以组成流。比如一个记录每次点击时坐标的流。随机点击页面多次之后，可能会产生这样一个流：</p>
<p><img src="/Coding-Guide/images/RxJS/click steam.png" alt="click steam"></p>
<p>而我们可以通过 RxJS 中的方法对这个流内的各个事件进行筛选，比如选出横坐标 x &lt; 250 的点击：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">filter( (event) -&gt; event.x &lt; <span class="number">250</span> )</div></pre></td></tr></table></figure>
<p><img src="/Coding-Guide/images/RxJS/click steam filtered.png" alt="click steam filtered"></p>
<p>也就是说，我们可以像对待 JavaScript 中可遍历对象一样，对流上的各个事件进行遍历，选出符合条件的事件。这就是 Rx 的魅力所在。</p>
<h3 id="主要运用场景"><a href="#主要运用场景" class="headerlink" title="主要运用场景"></a>主要运用场景</h3><p>既然 Rx 是为了流而生的，那么最佳运用场景当然是面对一系列较复杂的事件流时了。</p>
<h4 id="含有异步请求和事件触发的混合流"><a href="#含有异步请求和事件触发的混合流" class="headerlink" title="含有异步请求和事件触发的混合流"></a>含有异步请求和事件触发的混合流</h4><p>比如，用户在一个 input 内输入文字。每次<code>keyup</code>的时候就会根据输入内容，请求 Wikipedia 的 API 进行搜索：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>);</div><div class="line"><span class="comment">// 通过 fromEvent 以及 input keyup 事件创建一个流</span></div><div class="line"><span class="keyword">var</span> dictionarySuggest = Rx.Observable.fromEvent(input, <span class="string">'keyup'</span>)</div><div class="line">  <span class="comment">// 获取到每次 keyup 时的input value，并通过 filter 保证其合法性</span></div><div class="line">  .map(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> input.value; &#125;)</div><div class="line">  .filter(<span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123; <span class="keyword">return</span> !!text; &#125;)</div><div class="line">  .distinctUntilChanged()</div><div class="line">  .debounce(<span class="number">250</span>)</div><div class="line">  <span class="comment">// searchWikipedia 为异步请求方法</span></div><div class="line">  .flatMapLatest(searchWikipedia)</div><div class="line">  .subscribe(</div><div class="line">  	<span class="comment">// onNext</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</div><div class="line">      list = [];</div><div class="line">      list.concat(results.map(createItem));</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// onError</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">      logError(err);</div><div class="line">    &#125;</div><div class="line">  );</div></pre></td></tr></table></figure>
<p>我们创建了一个流来处理从用户<code>keyup</code>，到<code>searchWikipedia</code>，再到处理网络请求结果这一系列事件，并且在其中对事件进行了筛选判断：</p>
<ul>
<li><a href="http://reactivex.io/documentation/operators/filter.html" target="_blank" rel="external"><code>filter</code></a> 剔除掉不合法的值</li>
<li><a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/distinctuntilchanged.md" target="_blank" rel="external"><code>distinctUntilChanged</code></a> 当用户按下例如 左、右 这种按钮时，不会改变 input 的值，但也会触发<code>keyup</code>事件。这种时候就完全没有必要重复发送异步请求了。<code>distinctUntilChanged</code>会剔除流中有着相同的值的元素</li>
<li><a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/debounce.md" target="_blank" rel="external"><code>debounce</code></a> 在过了一段指定的时间还没触发事件时才触发下一个事件。也就是说，在打字过程中，如果用户在指定事件间隔（250ms）内没有再打字，则触发下一个事件（searchWikipedia）；否则我们认为用户在连续打字，所以不会频繁的发送网络请求</li>
<li><a href="http://reactivex.io/documentation/operators/flatmap.html" target="_blank" rel="external"><code>flatMapLatest</code></a><ul>
<li>首先，它是一个<code>flatMap</code>方法。它用一个指定的函数（searchWikipedia）对原始流中的每一项数据执行变换操作，并返回一个<code>Observable</code>，<code>flatMap</code>将所有的返回值组成一个新的流。</li>
<li>其次，<code>flatMapLatest</code>拥有<code>flatMap</code>的全部特性。但不同的是，在<code>flatMapLatest</code>的遍历调用过程中，如果一个事件 A 还没有触发完毕获取到返回值，就触发了下一个事件 B，则将忽略 A 返回的值。这样，我们就可以<strong>避免 A 异步的返回值因为返回较慢，反而覆盖了之后 B 异步的返回值</strong>。用图解释如下：</li>
</ul>
</li>
</ul>
<p><img src="/Coding-Guide/images/RxJS/flatMapLatest.png" alt="flatMapLatest"></p>
<ul>
<li><a href="http://reactivex.io/documentation/operators/subscribe.html" target="_blank" rel="external"><code>subscribe</code></a> 创建对流的监听，并提供了成功和失败的回调</li>
</ul>
<p>而在传统的编写方法里，我们可能会创建 input 的<code>keyup</code>监听事件，并缓存上一次的值；每次<code>keyup</code>时，要判断当前值是否合法，并且与上一次的值不一样。除此以外，还要创建一个定时器，每隔一段时间就用合法的值去请求<code>searchWikipedia</code>方法 — 即便这样，也无法保证不在用户连续打字时发送请求。</p>
<p>可以看到，在我们把事件串成流并进行处理之后，要比传统的编写方式方便很多。</p>
<h4 id="处理一系列的异步请求队列"><a href="#处理一系列的异步请求队列" class="headerlink" title="处理一系列的异步请求队列"></a>处理一系列的异步请求队列</h4><p>假设我们要读取一个 4GB 的大文件，将其加密后写入到一个新文件里。直接将整个文件读到内存里再加密、写入肯定是不行的，反之，我们依赖 RxJS 的流，创建多个读取、加密、写入事件，形成三个流出来：</p>
<ul>
<li>文件读取流：每次调用方法时异步读取 64k 的文件</li>
<li>加密流：对读取的文件进行加密</li>
<li>写入流：将加密好的内容异步写入新文件</li>
<li>最后对整个<code>observable</code>进行监听</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"><span class="keyword">var</span> Rx = <span class="built_in">require</span>(<span class="string">'rx'</span>);</div><div class="line"></div><div class="line"><span class="comment">// Read/write from stream implementation</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">readAsync</span>(<span class="params">fd, chunkSize</span>) </span>&#123; <span class="comment">/* impl */</span> &#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendAsync</span>(<span class="params">fd, buffer</span>) </span>&#123; <span class="comment">/* impl */</span> &#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">encrypt</span>(<span class="params">buffer</span>) </span>&#123; <span class="comment">/* impl */</span>&#125;</div><div class="line"></div><div class="line"><span class="comment">// 打开一个 4GB 的文件，每次只读取 64k</span></div><div class="line"><span class="keyword">var</span> inFile = fs.openSync(<span class="string">'4GBfile.txt'</span>, <span class="string">'r+'</span>);</div><div class="line"><span class="keyword">var</span> outFile = fs.openSync(<span class="string">'Encrypted.txt'</span>, <span class="string">'w+'</span>);</div><div class="line"></div><div class="line">readAsync(inFile, <span class="number">2</span> &lt;&lt; <span class="number">15</span>)</div><div class="line">  .map(encrypt)</div><div class="line">  .flatMap(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> appendAsync(outFile, data);</div><div class="line">  &#125;)</div><div class="line">  .subscribe(</div><div class="line">  	<span class="comment">// onNext</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;,</div><div class="line">    <span class="comment">// onError</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'An error occurred while encrypting the file: %s'</span>, err.message);</div><div class="line">      fs.closeSync(inFile);</div><div class="line">      fs.closeSync(outFile);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// onCompleted</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'Successfully encrypted the file.'</span>);</div><div class="line">      fs.closeSync(inFile);</div><div class="line">      fs.closeSync(outFile);</div><div class="line">    &#125;</div><div class="line">  );</div></pre></td></tr></table></figure>
<hr>
<p>由此可以看出，在应对较复杂的事件流或者处理多个异步事件的时候，使用 RxJS 会有一定优势；但如果复杂度没有这么高的时候则没有太大的使用必要。</p>
<p>目前为止，本文基本介绍了 RxJS 的核心概念 — 针对事件流的管理与掌控。</p>
<p>在下一篇文章里，我们将会利用 RxJS，完成一个简单的 github 应用。戳：<a href="./探索RxJS-做一个github小应用.md">探索 RxJS - 做一个 github 小应用</a>可查看文章，<a href="https://github.com/ecmadao/rxjs-example" target="_blank" rel="external">rxjs-example</a>查看案例源码。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/ecmadao">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#探索-RxJS-Core-Concept"><span class="toc-number">1.</span> <span class="toc-text">探索 RxJS - Core Concept</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Steam-in-ReactiveX"><span class="toc-number">1.1.</span> <span class="toc-text">Steam in ReactiveX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quick-Intro"><span class="toc-number">1.2.</span> <span class="toc-text">Quick Intro</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主要运用场景"><span class="toc-number">1.3.</span> <span class="toc-text">主要运用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#含有异步请求和事件触发的混合流"><span class="toc-number">1.3.1.</span> <span class="toc-text">含有异步请求和事件触发的混合流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#处理一系列的异步请求队列"><span class="toc-number">1.3.2.</span> <span class="toc-text">处理一系列的异步请求队列</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&text=探索RxJS-CoreConcept"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&is_video=false&description=探索RxJS-CoreConcept"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=探索RxJS-CoreConcept&body=Check out this article: http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&title=探索RxJS-CoreConcept"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/&name=探索RxJS-CoreConcept&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 ecmadao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/ecmadao">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    <script src="/Coding-Guide/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/Coding-Guide/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'ecmadao-blog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
