<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Table of Contents  generated with DocToc

Ember初步–Routing
定义路由
基本路由
Nested Routes
application route
index route
动态片段
全局路由/多URL匹配的路由


Route Model
静态model
动态model
多model


渲染模板
重定向
Transitioning Befo">
<meta property="og:type" content="article">
<meta property="og:title" content="Ember初步--Routing">
<meta property="og:url" content="http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/index.html">
<meta property="og:site_name" content="ecmadao">
<meta property="og:description" content="Table of Contents  generated with DocToc

Ember初步–Routing
定义路由
基本路由
Nested Routes
application route
index route
动态片段
全局路由/多URL匹配的路由


Route Model
静态model
动态model
多model


渲染模板
重定向
Transitioning Befo">
<meta property="og:updated_time" content="2017-01-14T12:11:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ember初步--Routing">
<meta name="twitter:description" content="Table of Contents  generated with DocToc

Ember初步–Routing
定义路由
基本路由
Nested Routes
application route
index route
动态片段
全局路由/多URL匹配的路由


Route Model
静态model
动态model
多model


渲染模板
重定向
Transitioning Befo">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Ember初步--Routing</title>
    <!-- styles -->
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/lib/jquery/jquery.min.js"></script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/01/13/Notes/RxJS/探索RxJS-CoreConcept/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2017/01/13/Notes/RxJS/探索RxJS-Observable/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&text=Ember初步--Routing"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&is_video=false&description=Ember初步--Routing"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ember初步--Routing&body=Check out this article: http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&name=Ember初步--Routing&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ember初步–Routing"><span class="toc-number">1.</span> <span class="toc-text">Ember初步–Routing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义路由"><span class="toc-number">1.1.</span> <span class="toc-text">定义路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本路由"><span class="toc-number">1.1.1.</span> <span class="toc-text">基本路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nested-Routes"><span class="toc-number">1.1.2.</span> <span class="toc-text">Nested Routes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#application-route"><span class="toc-number">1.1.3.</span> <span class="toc-text">application route</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index-route"><span class="toc-number">1.1.4.</span> <span class="toc-text">index route</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#动态片段"><span class="toc-number">1.1.5.</span> <span class="toc-text">动态片段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#全局路由-多URL匹配的路由"><span class="toc-number">1.1.6.</span> <span class="toc-text">全局路由/多URL匹配的路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Route-Model"><span class="toc-number">1.2.</span> <span class="toc-text">Route Model</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#静态model"><span class="toc-number">1.2.1.</span> <span class="toc-text">静态model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#动态model"><span class="toc-number">1.2.2.</span> <span class="toc-text">动态model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多model"><span class="toc-number">1.2.3.</span> <span class="toc-text">多model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#渲染模板"><span class="toc-number">1.3.</span> <span class="toc-text">渲染模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重定向"><span class="toc-number">1.4.</span> <span class="toc-text">重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Transitioning-Before-the-Model-is-Known"><span class="toc-number">1.4.1.</span> <span class="toc-text">Transitioning Before the Model is Known</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Transitioning-After-the-Model-is-Known"><span class="toc-number">1.4.2.</span> <span class="toc-text">Transitioning After the Model is Known</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#子路由"><span class="toc-number">1.4.3.</span> <span class="toc-text">子路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#阻止和重试路由跳转"><span class="toc-number">1.5.</span> <span class="toc-text">阻止和重试路由跳转</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通过willTransition阻止路由跳转"><span class="toc-number">1.5.1.</span> <span class="toc-text">通过willTransition阻止路由跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过model内的beforeModel和afterModel方法阻止跳转"><span class="toc-number">1.5.2.</span> <span class="toc-text">通过model内的beforeModel和afterModel方法阻止跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#储存-重试路由转变"><span class="toc-number">1.5.3.</span> <span class="toc-text">储存/重试路由转变</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loading-Error状态"><span class="toc-number">1.6.</span> <span class="toc-text">Loading/Error状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loading状态"><span class="toc-number">1.6.1.</span> <span class="toc-text">loading状态</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#加载loading模板"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">加载loading模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#loading事件"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">loading事件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#error状态"><span class="toc-number">1.6.2.</span> <span class="toc-text">error状态</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#error模板"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">error模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#error事件"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">error事件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL参数"><span class="toc-number">1.7.</span> <span class="toc-text">URL参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#特定的URL参数"><span class="toc-number">1.7.1.</span> <span class="toc-text">特定的URL参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过link-tohelper给URL带上参数"><span class="toc-number">1.7.2.</span> <span class="toc-text">通过link-tohelper给URL带上参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过transitionTo加参数"><span class="toc-number">1.7.3.</span> <span class="toc-text">通过transitionTo加参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Opting-into-a-full-transition"><span class="toc-number">1.7.4.</span> <span class="toc-text">Opting into a full transition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用replaceState更新路由"><span class="toc-number">1.7.5.</span> <span class="toc-text">使用replaceState更新路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参数名映射"><span class="toc-number">1.7.6.</span> <span class="toc-text">参数名映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认值和反序列化"><span class="toc-number">1.7.7.</span> <span class="toc-text">默认值和反序列化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#粘性参数"><span class="toc-number">1.7.8.</span> <span class="toc-text">粘性参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#异步路由"><span class="toc-number">1.8.</span> <span class="toc-text">异步路由</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Ember初步--Routing
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ecmadao</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-01-13T05:58:37.000Z" itemprop="datePublished">2017-01-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/ember/">ember</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong>  <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="external">DocToc</a></em></p>
<ul>
<li><a href="#ember%E5%88%9D%E6%AD%A5--routing">Ember初步–Routing</a><ul>
<li><a href="#%E5%AE%9A%E4%B9%89%E8%B7%AF%E7%94%B1">定义路由</a><ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E8%B7%AF%E7%94%B1">基本路由</a></li>
<li><a href="#nested-routes">Nested Routes</a></li>
<li><a href="#application-route">application route</a></li>
<li><a href="#index-route">index route</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E7%89%87%E6%AE%B5">动态片段</a></li>
<li><a href="#%E5%85%A8%E5%B1%80%E8%B7%AF%E7%94%B1%E5%A4%9Aurl%E5%8C%B9%E9%85%8D%E7%9A%84%E8%B7%AF%E7%94%B1">全局路由/多URL匹配的路由</a></li>
</ul>
</li>
<li><a href="#route-model">Route Model</a><ul>
<li><a href="#%E9%9D%99%E6%80%81model">静态model</a></li>
<li><a href="#%E5%8A%A8%E6%80%81model">动态model</a></li>
<li><a href="#%E5%A4%9Amodel">多model</a></li>
</ul>
</li>
<li><a href="#%E6%B8%B2%E6%9F%93%E6%A8%A1%E6%9D%BF">渲染模板</a></li>
<li><a href="#%E9%87%8D%E5%AE%9A%E5%90%91">重定向</a><ul>
<li><a href="#transitioning-before-the-model-is-known">Transitioning Before the Model is Known</a></li>
<li><a href="#transitioning-after-the-model-is-known">Transitioning After the Model is Known</a></li>
<li><a href="#%E5%AD%90%E8%B7%AF%E7%94%B1">子路由</a></li>
</ul>
</li>
<li><a href="#%E9%98%BB%E6%AD%A2%E5%92%8C%E9%87%8D%E8%AF%95%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC">阻止和重试路由跳转</a><ul>
<li><a href="#%E9%80%9A%E8%BF%87willtransition%E9%98%BB%E6%AD%A2%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC">通过<code>willTransition</code>阻止路由跳转</a></li>
<li><a href="#%E9%80%9A%E8%BF%87model%E5%86%85%E7%9A%84beforemodel%E5%92%8Caftermodel%E6%96%B9%E6%B3%95%E9%98%BB%E6%AD%A2%E8%B7%B3%E8%BD%AC">通过model内的<code>beforeModel</code>和<code>afterModel</code>方法阻止跳转</a></li>
<li><a href="#%E5%82%A8%E5%AD%98%E9%87%8D%E8%AF%95%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%98">储存/重试路由转变</a></li>
</ul>
</li>
<li><a href="#loadingerror%E7%8A%B6%E6%80%81">Loading/Error状态</a><ul>
<li><a href="#loading%E7%8A%B6%E6%80%81"><code>loading</code>状态</a><ul>
<li><a href="#%E5%8A%A0%E8%BD%BDloading%E6%A8%A1%E6%9D%BF">加载loading模板</a></li>
<li><a href="#loading%E4%BA%8B%E4%BB%B6">loading事件</a></li>
</ul>
</li>
<li><a href="#error%E7%8A%B6%E6%80%81"><code>error</code>状态</a><ul>
<li><a href="#error%E6%A8%A1%E6%9D%BF">error模板</a></li>
<li><a href="#error%E4%BA%8B%E4%BB%B6">error事件</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#url%E5%8F%82%E6%95%B0">URL参数</a><ul>
<li><a href="#%E7%89%B9%E5%AE%9A%E7%9A%84url%E5%8F%82%E6%95%B0">特定的URL参数</a></li>
<li><a href="#%E9%80%9A%E8%BF%87link-tohelper%E7%BB%99url%E5%B8%A6%E4%B8%8A%E5%8F%82%E6%95%B0">通过<code>link-to</code>helper给URL带上参数</a></li>
<li><a href="#%E9%80%9A%E8%BF%87transitionto%E5%8A%A0%E5%8F%82%E6%95%B0">通过<code>transitionTo</code>加参数</a></li>
<li><a href="#opting-into-a-full-transition">Opting into a full transition</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8replacestate%E6%9B%B4%E6%96%B0%E8%B7%AF%E7%94%B1">使用<code>replaceState</code>更新路由</a></li>
<li><a href="#%E5%8F%82%E6%95%B0%E5%90%8D%E6%98%A0%E5%B0%84">参数名映射</a></li>
<li><a href="#%E9%BB%98%E8%AE%A4%E5%80%BC%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">默认值和反序列化</a></li>
<li><a href="#%E7%B2%98%E6%80%A7%E5%8F%82%E6%95%B0">粘性参数</a></li>
</ul>
</li>
<li><a href="#%E5%BC%82%E6%AD%A5%E8%B7%AF%E7%94%B1">异步路由</a></li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="Ember初步–Routing"><a href="#Ember初步–Routing" class="headerlink" title="Ember初步–Routing"></a>Ember初步–Routing</h2><p>Ember中的Router会把URL交给<code>route handler</code>来处理，每个Route Handler可以做如下的事情：</p>
<ul>
<li>render一个template</li>
<li>加载模板对应的modal</li>
<li>重定向到新的route</li>
<li>处理事件（改变modal、转换路由）</li>
</ul>
<h3 id="定义路由"><a href="#定义路由" class="headerlink" title="定义路由"></a>定义路由</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ ember generate route route-name</div><div class="line"><span class="comment"># will create</span></div><div class="line"><span class="comment"># app/routes/route-name.js</span></div><div class="line"><span class="comment"># app/templates/route-name.hbs</span></div><div class="line"><span class="comment"># tests/unit/routes/route-name-test.js</span></div><div class="line"><span class="comment"># and</span></div><div class="line"><span class="comment"># will add new route to app/router.js</span></div></pre></td></tr></table></figure>
<h4 id="基本路由"><a href="#基本路由" class="headerlink" title="基本路由"></a>基本路由</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'about'</span>, &#123; <span class="attr">path</span>: <span class="string">'/about'</span> &#125;);</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'favorites'</span>, &#123; <span class="attr">path</span>: <span class="string">'/favs'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>现在，当用户访问<code>/about</code>的时候，Ember会渲染<code>about</code>模板。favorites路由同理。</p>
<p>另外，当路由名称和模板名称一样的时候，就可以直接省略后面那个包含了path的Object：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'about'</span>);</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'favorites'</span>, &#123; <span class="attr">path</span>: <span class="string">'/favs'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>在模板内，你可以使用<code>{{link-to}}</code>来创建<code>a</code>标签，以此链接到其他的路由：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#link-to "index"&#125;&#125;<span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span>&#123;&#123;/link-to&#125;&#125;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span></div><div class="line">  &#123;&#123;#link-to "about"&#125;&#125;About&#123;&#123;/link-to&#125;&#125;</div><div class="line">  &#123;&#123;#link-to "favorites"&#125;&#125;Favorites&#123;&#123;/link-to&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>{{link-to}}</code>方法会根据当前路由自动给标签加上<code>active</code>class。</p>
<p>如果路由由多个单词组成，则要按照常规写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'blog-post'</span>, &#123; <span class="attr">path</span>: <span class="string">'/blog-post'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'blog_post'</span>, &#123; <span class="attr">path</span>: <span class="string">'/blog-post'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>以上两个路由会渲染<code>blog-post.hbs</code>和<code>blog-post.js</code></p>
<h4 id="Nested-Routes"><a href="#Nested-Routes" class="headerlink" title="Nested Routes"></a>Nested Routes</h4><p>有时候你的路由有嵌套关系，比如，一个博客网站，它的列表页和新建页的URL是有递进关系的，例如<code>/posts/new</code>，此时可以通过：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ember generate route posts/new</div></pre></td></tr></table></figure>
<p>创建出形如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'new'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>的路由关系，而他们的模板也有嵌套复用的关系：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- templates/posts.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Posts<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- Display posts and other content --&gt;</span></div><div class="line">&#123;&#123;outlet&#125;&#125;</div></pre></td></tr></table></figure>
<p>当用户访问<code>/posts</code>页面的时候，渲染的是<code>templates/posts.hbs</code>模板；而当他们访问<code>posts/new</code>页面的时候，<code>posts/new.hbs</code>模板会作为<code>{{outlet}}</code>输出在<code>posts.hbs</code>模板里面。</p>
<h4 id="application-route"><a href="#application-route" class="headerlink" title="application route"></a>application route</h4><p>当你访问ember web应用时，实际上也访问了<code>application</code>路由，因此，<code>app/templates/application.hbs</code>模板会贯穿整个应用。其他页面的模板都将作为<code></code>输出在<code>application.hbs</code>模板中。</p>
<h4 id="index-route"><a href="#index-route" class="headerlink" title="index route"></a>index route</h4><p>Ember会自动将<code>/</code>路径指向名为<code>index</code>的路由。在没有设置<code>index</code>模板的情况下，会自动渲染一个空的<code>{{outlet}}</code>到<code>application.hbs</code>模板。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'favorites'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>与下面这样的写法等价：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'index'</span>, &#123; <span class="attr">path</span>: <span class="string">'/'</span> &#125;);</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'index'</span>, &#123; <span class="attr">path</span>: <span class="string">'/'</span> &#125;);</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'favorites'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="动态片段"><a href="#动态片段" class="headerlink" title="动态片段"></a>动态片段</h4><p>路由的一个责任是加载对应的model。例如，如果我们有<code>this.route(&#39;posts&#39;);</code>这个路由，它会加载应用里所有的博文。</p>
<p>因为<code>/posts</code>相当于一个静态的model，我们不需要额外的信息就能够知道它会渲染出什么（一个博客文章的列表）。但是，对于针对某一篇博客的路由而言，就不得而知了。我们总不能hard-code出每一篇博客的路由。</p>
<p>此时的路由是动态的。</p>
<p>动态路由片段在定义时以<code>:</code>开头，后面则跟着各个路由独特的认证：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>);</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'post'</span>, &#123; <span class="attr">path</span>: <span class="string">'/post/:post_id'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>当用户导航到<code>/post/5</code>这个URL时，路由会将<code>post_id</code>赋值为5，以便渲染对应的文章。</p>
<blockquote>
<p>Ember遵守着形如<code>:model-name_id</code>的动态路由规范，例如上面的<code>:post-id</code></p>
<p>第一个理由是路由可以获取到正确的model，例如上面会去找post model</p>
<p>第二个理由则是动态路由的参数是个对象，它的键和值应该一一对应</p>
</blockquote>
<p>鉴于上面的理由，下面这样写的路由不会正常工作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">"photo"</span>, &#123; <span class="attr">path</span>: <span class="string">"photo/:id"</span> &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">"comment"</span>, &#123; <span class="attr">path</span>: <span class="string">"comment/:id"</span> &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>但这样的就会：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">"photo"</span>, &#123; <span class="attr">path</span>: <span class="string">"photo/:photo_id"</span> &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">"comment"</span>, &#123; <span class="attr">path</span>: <span class="string">"comment/:comment_id"</span> &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="全局路由-多URL匹配的路由"><a href="#全局路由-多URL匹配的路由" class="headerlink" title="全局路由/多URL匹配的路由"></a>全局路由/多URL匹配的路由</h4><p>你可以定义能够匹配多个路径的路由。它的场景使用场景是用来捕获用户输入的错误的路径，来渲染一个特定的模板：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'page-not-found'</span>, &#123; <span class="attr">path</span>: <span class="string">'/*wildcard'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Route-Model"><a href="#Route-Model" class="headerlink" title="Route Model"></a>Route Model</h3><p>通常情况下，模板会渲染其对应的model里提供的数据。而加载model则是route的本质工作。</p>
<h4 id="静态model"><a href="#静态model" class="headerlink" title="静态model"></a>静态model</h4><p>例如这个route：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'favorite-posts'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>为了能让<code>favorite-posts</code>路由加载model，你需要在<code>favorite-posts</code>的route handler中使用<code>model()</code>钩子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/favorite-posts.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'store'</span>).query(<span class="string">'post'</span>, &#123; <span class="attr">favorite</span>: <span class="literal">true</span> &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>还有就是，<code>model()</code>必须返回一个<code>Ember Data</code>，它可以是<code>Promise</code>对象，JS对象或者Array。在渲染template之前，Ember会保持阻塞知道数据获取完毕（promise resolved）。</p>
<p>之后路由会将从<code>model()</code>钩子返回的值作为对应controller的model属性。之后你就能够在模板里获取到controller里的model属性了：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- app/templates/favorite-posts.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Favorite Posts<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">&#123;&#123;#each model as |post|&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;post.body&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">&#123;&#123;/each&#125;&#125;</div></pre></td></tr></table></figure>
<h4 id="动态model"><a href="#动态model" class="headerlink" title="动态model"></a>动态model</h4><p>一些路由总是会对应不变的model，例如，<code>/photos</code>路由总是会渲染出照片列表。即便用户离开了页面之后再回来，该路由对应的model也不会变。</p>
<p>但是，有一些路由是根据用户的互动而变化的。还是上面那个渲染照片列表的App，当用户点击图片列表里的某个特定图片时，渲染出来的内容各不相同，但都会使用<code>phone.hbs</code>这个模板。此时，针对不同的含有动态片段路由，会处理不同的model：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'photo'</span>, &#123; <span class="attr">path</span>: <span class="string">'/photos/:photo_id'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>路由接收的<code>photo_id</code>会作为参数传入<code>route handler</code>，即<code>params</code>。</p>
<p>但要注意的是，<code>params</code>是个Object，拥有<code>photo_id</code>参数，即点击不同图片是加载的不同动态路由里拥有的图片ID：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/photo.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model(params) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'store'</span>).findRecord(<span class="string">'photo'</span>, params.photo_id);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>注意，拥有动态路由的模板应该这么写：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- app/templates/photos.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Photos<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">&#123;&#123;#each model as |photo|&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- photo.id作为参数传入，形成不同的URL --&gt;</span></div><div class="line">    &#123;&#123;#link-to 'photo' photo.id&#125;&#125;</div><div class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;photo.thumbnailUrl&#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">"&#123;&#123;photo.title&#125;&#125;"</span> /&gt;</span></div><div class="line">    &#123;&#123;/link-to&#125;&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">&#123;&#123;/each&#125;&#125;</div></pre></td></tr></table></figure>
<h4 id="多model"><a href="#多model" class="headerlink" title="多model"></a>多model</h4><p>复数个model可以通过<a href="http://emberjs.com/api/classes/RSVP.html#method_hash" target="_blank" rel="external"><code>RSVP.hash</code></a>来返回。<code>RSVP.hash</code>接收<code>Promise</code>作为参数，并且当所有的Promise都resolve之后才会返回resolve。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/songs.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"><span class="keyword">import</span> RSVP <span class="keyword">from</span> <span class="string">'rsvp'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model() &#123;</div><div class="line">    <span class="keyword">return</span> RSVP.hash(&#123;</div><div class="line">      <span class="attr">songs</span>: <span class="keyword">this</span>.get(<span class="string">'store'</span>).findAll(<span class="string">'song'</span>),</div><div class="line">      <span class="attr">albums</span>: <span class="keyword">this</span>.get(<span class="string">'store'</span>).findAll(<span class="string">'album'</span>)</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- app/templates/songs.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Playlist<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  &#123;&#123;#each model.songs as |song|&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;song.name&#125;&#125; by &#123;&#123;song.artist&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  &#123;&#123;/each&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Albums<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  &#123;&#123;#each model.albums as |album|&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;album.title&#125;&#125; by &#123;&#123;album.artist&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  &#123;&#123;/each&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="渲染模板"><a href="#渲染模板" class="headerlink" title="渲染模板"></a>渲染模板</h3><p>在默认情况下，route handler会渲染和它同名的模板：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'new'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>posts</code>路由渲染<code>posts.hbs</code>模板，而<code>posts.new</code>路由渲染<code>posts/new.hbs</code>模板。</p>
<p>每个模板都会在加载其对应的controller数据之后，作为父模板的<code>{{outlet}}</code>渲染。</p>
<p>如果你不想用默认的方式渲染一样名称的模板，则需要设置<code>templateName</code>属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/posts.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  <span class="attr">templateName</span>: <span class="string">'posts/favorite-posts'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>在route内调用<code>transitionTo()</code>方法，或者在controller内调用<code>transitionToRoute()</code>方法，都会立即停止当前的渲染，并开始一个新的。</p>
<h4 id="Transitioning-Before-the-Model-is-Known"><a href="#Transitioning-Before-the-Model-is-Known" class="headerlink" title="Transitioning Before the Model is Known"></a>Transitioning Before the Model is Known</h4><p>如果你想在路由中进行重定向，则可以在<code>beforeModel()</code>钩子中进行处理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/index.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  beforeModel() &#123;</div><div class="line">    <span class="keyword">this</span>.transitionTo(<span class="string">'posts'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="Transitioning-After-the-Model-is-Known"><a href="#Transitioning-After-the-Model-is-Known" class="headerlink" title="Transitioning After the Model is Known"></a>Transitioning After the Model is Known</h4><p>如果你为了获取重定向相关的信息，而需要等待model载入的话，可以在<code>afterModel()</code>钩子里处理逻辑。</p>
<p><code>afterModel()</code>方法将resolved的model作为第一个参数，将<code>transition</code>作为第二个参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>);</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'post'</span>, &#123; <span class="attr">path</span>: <span class="string">'/post/:post_id'</span> &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/posts.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  afterModel(model, transition) &#123;</div><div class="line">    <span class="keyword">if</span> (model.get(<span class="string">'length'</span>) === <span class="number">1</span>) &#123;</div><div class="line">      <span class="keyword">this</span>.transitionTo(<span class="string">'post'</span>, model.get(<span class="string">'firstObject'</span>));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="子路由"><a href="#子路由" class="headerlink" title="子路由"></a>子路由</h4><p>修改下上面的路由关系，改成：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'posts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'post'</span>, &#123; <span class="attr">path</span>: <span class="string">':post_id'</span> &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>如果我们在<code>afterModel()</code>中重定向到了<code>posts.post</code>，那么会因为参数错误而再次发起重定向。</p>
<p><code>redirect()</code>方法可以解决这个问题，它保证父route的钩子事件不会再次被调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/posts.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  redirect(model, transition) &#123;</div><div class="line">    <span class="keyword">if</span> (model.get(<span class="string">'length'</span>) === <span class="number">1</span>) &#123;</div><div class="line">      <span class="keyword">this</span>.transitionTo(<span class="string">'posts.post'</span>, model.get(<span class="string">'firstObject'</span>));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="阻止和重试路由跳转"><a href="#阻止和重试路由跳转" class="headerlink" title="阻止和重试路由跳转"></a>阻止和重试路由跳转</h3><ul>
<li><code>transition.abort()</code>立即阻止路由跳转</li>
<li><code>transition.retry()</code>重试路由跳转</li>
</ul>
<h4 id="通过willTransition阻止路由跳转"><a href="#通过willTransition阻止路由跳转" class="headerlink" title="通过willTransition阻止路由跳转"></a>通过<code>willTransition</code>阻止路由跳转</h4><p>当Ember试图通过<code>{{lin-to}}</code>、<code>transitionTo</code>，或者URL变化来进行路由跳转时，会触发当前路由的<code>willTransition</code>行为，使得它可以决定是否继续进行路由改变的行为。</p>
<p>假设你有一个路由，渲染出一个表单。当用户填写表单的时候不小心后退了。除非我们阻止了用户的回退，否则他的填写都前功尽弃了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/form.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    willTransition(transition) &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>,controller.get(<span class="string">'userHasEnteredData'</span>) &amp;&amp;</div><div class="line">          !confirm(<span class="string">'Are you sure you want to abandon progress?'</span>)) &#123;</div><div class="line">        transition.abort();</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>当用户点击<code>{{link-to}}</code>，或者通过<code>transitionTo</code>方法改变路由的时候，利用上面的方法我们可以成功的阻止他的跳转。但是如果他使用了浏览器的后退键，调用<code>route:from</code>，或者人为的改变URL的时候，则会在<code>willTransition</code>方法调用之前就被定向到了新的URL。此时上面的方法无效。</p>
<h4 id="通过model内的beforeModel和afterModel方法阻止跳转"><a href="#通过model内的beforeModel和afterModel方法阻止跳转" class="headerlink" title="通过model内的beforeModel和afterModel方法阻止跳转"></a>通过model内的<code>beforeModel</code>和<code>afterModel</code>方法阻止跳转</h4><p>我们将要在<a href="https://guides.emberjs.com/v2.7.0/routing/asynchronous-routing" target="_blank" rel="external">异步路由</a>里说到的<code>beforeModel</code>和<code>afterModel</code>钩子，接收<code>transition</code>作为参数被调用。它会在目的路由的route-handler中被调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/disco.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  beforeModel(transition) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>() &gt; <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'January 1, 1980'</span>)) &#123;</div><div class="line">      alert(<span class="string">'Sorry, you need a time mechine to enter this route'</span>);</div><div class="line">      transition.abort();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="储存-重试路由转变"><a href="#储存-重试路由转变" class="headerlink" title="储存/重试路由转变"></a>储存/重试路由转变</h4><p>阻止了路由转变之后，可以在稍后进行重试。它的常用场景是一个需要用户认证的路由，把没有认证的用户重定向到了登录页面，等到用户登录完成之后再重新回到之前的路由：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/some-authonticated.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  beforeModel(transition) &#123;</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.controllerFor(<span class="string">'auth'</span>).get(<span class="string">'userIsLoggedIn'</span>)) &#123;</div><div class="line">      <span class="keyword">var</span> loginCOntroller = <span class="keyword">this</span>.controllerFor(<span class="string">'login'</span>);</div><div class="line">      loginController.get(<span class="string">'previousTransition'</span>, transition);</div><div class="line">      <span class="keyword">this</span>.transitionTo(<span class="string">'login'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/login.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    login() &#123;</div><div class="line">      <span class="keyword">var</span> previousTransitoin = <span class="keyword">this</span>.get(<span class="string">'previousTransition'</span>);</div><div class="line">      <span class="keyword">if</span> (previousTransition) &#123;</div><div class="line">        <span class="keyword">this</span>.set(<span class="string">'previousTransition'</span>, <span class="literal">null</span>);</div><div class="line">        previousTransition.retry();</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">this</span>.transitionToRoute(<span class="string">'index'</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Loading-Error状态"><a href="#Loading-Error状态" class="headerlink" title="Loading/Error状态"></a>Loading/Error状态</h3><h4 id="loading状态"><a href="#loading状态" class="headerlink" title="loading状态"></a><code>loading</code>状态</h4><h5 id="加载loading模板"><a href="#加载loading模板" class="headerlink" title="加载loading模板"></a>加载loading模板</h5><p>route-handler在加载路由的时候，会因为各个方法而阻塞，直到所有的Promise全部完成。举个栗子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'slow-model'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/slow-model.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'store'</span>).findAll(<span class="string">'slow-model'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>当你访问<code>slow-model</code>的时候，<code>model</code>需要很长的时候获取到需要的数据。在这段时间里，如果什么也不做的话，在UI上就没有任何变化，直至数据加载完成，然后页面突然呈现。这太糟糕了。我们该如何避免？</p>
<p>定义一个叫做<code>loading</code>或者类似名称的模板，并且将路由设计成嵌套的形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'foo'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'bar'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.route(<span class="string">'slow-model'</span>);</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>当试图加载<code>foo.bar.slow-model</code>路由的时候，Ember会试着不断获取<code>routeName-loading</code>或者上层的loading模板：</p>
<ul>
<li><code>foo.bar.slow-model-loading</code></li>
<li><code>foo.bar.loading</code>或者<code>foo.bar-loading</code></li>
<li><code>foo.loading</code>或者<code>foo-loading</code></li>
<li><code>loading</code>或者<code>application-loading</code></li>
</ul>
<p>要注意的是，Ember不会寻找<code>slow-model.loading</code>模板</p>
<p>而当路由指向<code>foo.bar</code>的时候，Ember会寻找：</p>
<ul>
<li><code>foo.bar-loading</code></li>
<li><code>foo.loading</code>或者<code>foo-loading</code></li>
<li><code>loading</code>或者<code>application-loading</code></li>
</ul>
<p>在这个情况下，Ember不再寻找<code>foo.bar.loading</code>模板</p>
<h5 id="loading事件"><a href="#loading事件" class="headerlink" title="loading事件"></a>loading事件</h5><p>如果<code>beforeModel</code>/<code>model</code>/<code>afterModel</code>方法没有立刻返回，<code>loading</code>方法就会自动调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/foo-slow-model.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'store'</span>).findAll(<span class="string">'slow-model'</span>);</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    loading(transition, originRoute) &#123;</div><div class="line">      <span class="keyword">let</span> controller = <span class="keyword">this</span>.controllerFor(<span class="string">'foo'</span>);</div><div class="line">      controller.set(<span class="string">'currentlyLoading'</span>, <span class="literal">true</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>如果在当前的route-handler里没有定义<code>loading</code>方法，那么它会继续向上冒泡，寻找父路由的<code>loading</code>方法。</p>
<p>当使用<code>loading</code>方法的时候，我们可以通过<code>transition</code>的<code>promise</code>来确定什么时候loading完毕：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/foo-slow-model.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  actions: &#123;</div><div class="line">    loading(transition, originRoute) &#123;</div><div class="line">      <span class="keyword">let</span> controller = <span class="keyword">this</span>.controllerFor(<span class="string">'foo'</span>);</div><div class="line">      controller.set(<span class="string">'currentlyLoading'</span>, <span class="literal">true</span>);</div><div class="line">      transition.promise.finally(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        controller.set(<span class="string">'currentlyLoading'</span>, <span class="literal">false</span>);</div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="error状态"><a href="#error状态" class="headerlink" title="error状态"></a><code>error</code>状态</h4><h5 id="error模板"><a href="#error模板" class="headerlink" title="error模板"></a>error模板</h5><p>通过抛出一个错误，或者promise返回reject，都可以出发error状态。例如如下路由：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Route.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'articles'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'overview'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>当抛出错误的时候，会类似于loading机制一样寻找error模板：</p>
<ul>
<li><code>articles.overview-error</code></li>
<li><code>articles.error</code>或者<code>articles-error</code></li>
<li><code>error</code>或者<code>application-error</code></li>
</ul>
<h5 id="error事件"><a href="#error事件" class="headerlink" title="error事件"></a>error事件</h5><p>当触发error状态的时候，<code>error</code>方法会被调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/articles-overview.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model(params) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'store'</span>).findAll(<span class="string">'problematic-model'</span>);</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    error(error, transition) &#123;</div><div class="line">      <span class="keyword">if</span> (error) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.transitionTo(<span class="string">'error-page'</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>类似于<code>loading</code>事件，你可以让<code>error</code>事件的处理向上传递，来避免写重复的代码。</p>
<h3 id="URL参数"><a href="#URL参数" class="headerlink" title="URL参数"></a>URL参数</h3><h4 id="特定的URL参数"><a href="#特定的URL参数" class="headerlink" title="特定的URL参数"></a>特定的URL参数</h4><p>特定的参数必须定义在route对应的controller里。例如，为了获取<code>articles</code>理由里的URL参数，必须在<code>controller:articles</code>里声明：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="comment">// 定义category参数</span></div><div class="line">  queryParams: [<span class="string">'category'</span>],</div><div class="line">  <span class="attr">category</span>: <span class="literal">null</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>因此，在<code>articles</code>路由加载好之后，任何<code>category</code>参数的变化都会被监听，我们也就可以以此来更新数据：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: [<span class="string">'category'</span>],</div><div class="line">  <span class="attr">category</span>: <span class="literal">null</span>,</div><div class="line"></div><div class="line">  <span class="attr">filteredArticles</span>: Ember.computed(<span class="string">'category'</span>, <span class="string">'model'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> category = <span class="keyword">this</span>.get(<span class="string">'category'</span>);</div><div class="line">    <span class="keyword">var</span> articles = <span class="keyword">this</span>.get(<span class="string">'model'</span>);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (category) &#123;</div><div class="line">      <span class="keyword">return</span> articles.filterBy(<span class="string">'category'</span>, category);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> articles;</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="通过link-tohelper给URL带上参数"><a href="#通过link-tohelper给URL带上参数" class="headerlink" title="通过link-tohelper给URL带上参数"></a>通过<code>link-to</code>helper给URL带上参数</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 设置一个特定的参数 --&gt;</span></div><div class="line">&#123;&#123;#link-to "posts" (query-params direction="asc")&#125;&#125;Sort&#123;&#123;/link-to&#125;&#125;</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 或者绑定一个变量 --&gt;</span></div><div class="line">&#123;&#123;#link-to "posts" (query-params direction=otherDirection)&#125;&#125;Sort&#123;&#123;/link-to&#125;&#125;</div></pre></td></tr></table></figure>
<h4 id="通过transitionTo加参数"><a href="#通过transitionTo加参数" class="headerlink" title="通过transitionTo加参数"></a>通过<code>transitionTo</code>加参数</h4><p><code>Router#transitionTo</code>和<code>Controller#transitionToRoute</code>都可以接受一个参数，且该参数要有<code>queryParams</code>键值对：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/some-route.js</span></div><div class="line"><span class="keyword">this</span>.transitionTo(<span class="string">'post'</span>, object, &#123; <span class="attr">queryParams</span>: &#123; <span class="attr">showDetails</span>: <span class="literal">true</span> &#125;&#125;);</div><div class="line"><span class="keyword">this</span>.transitionTo(<span class="string">'posts'</span>, &#123; <span class="attr">queryParams</span>: &#123; <span class="attr">sort</span>: <span class="string">'title'</span> &#125;&#125;);</div><div class="line"></div><div class="line"><span class="comment">// if you want to transition the query parameters without changing the route</span></div><div class="line"><span class="keyword">this</span>.transitionTo(&#123; <span class="attr">queryParams</span>: &#123; <span class="attr">direction</span>: <span class="string">'asc'</span> &#125;&#125;);</div></pre></td></tr></table></figure>
<p>也可以直接把带有参数的URL传递给<code>transitionTo</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.transitionTo(<span class="string">'/posts/1?sort=date&amp;showDetails=true'</span>);</div></pre></td></tr></table></figure>
<h4 id="Opting-into-a-full-transition"><a href="#Opting-into-a-full-transition" class="headerlink" title="Opting into a full transition"></a>Opting into a full transition</h4><p>由<code>transitionTo</code>或者<code>link-to</code>提供的参数，只会让Ember相应其参数的变化，使得在改变参数的时候不会有数据查询结果的变化，而不会再调用<code>model</code>或者<code>setupController</code>方法。如果我们想强制性刷新页面，确保方法的再次调用，则需要在<code>controller</code>对应的路由中配置<code>queryParams</code>对象，在某个特定参数下添加<code>refreshModel</code>字段并设置为<code>true</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: &#123;</div><div class="line">    <span class="attr">category</span>: &#123;</div><div class="line">      <span class="comment">// 当category参数改变时会强制刷新model</span></div><div class="line">      refreshModel: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  model(params) &#123;</div><div class="line">    <span class="comment">// This gets called upon entering 'articles' route</span></div><div class="line">    <span class="comment">// for the first time, and we opt into refiring it upon</span></div><div class="line">    <span class="comment">// query param changes by setting `refreshModel:true` above.</span></div><div class="line"></div><div class="line">    <span class="comment">// params has format of &#123; category: "someValueOrJustNull" &#125;,</span></div><div class="line">    <span class="comment">// which we can forward to the server.</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'store'</span>).query(<span class="string">'article'</span>, params);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/articles.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: [<span class="string">'category'</span>],</div><div class="line">  <span class="attr">category</span>: <span class="literal">null</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="使用replaceState更新路由"><a href="#使用replaceState更新路由" class="headerlink" title="使用replaceState更新路由"></a>使用<code>replaceState</code>更新路由</h4><p>在默认情况下，Ember使用<code>pushState</code>来跟新URL。如果你乐意也可以使用<code>replaceState</code>更新URL：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: &#123;</div><div class="line">    <span class="attr">category</span>: &#123;</div><div class="line">      <span class="attr">replace</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>设置了<code>replace</code>的路由，在点击时，会在浏览器历史记录里，以点击的链接来替代当前页面的链接。</p>
<p>它的效果和<code>{{#link-to}}</code>helper里设置了<code>replace=true</code>一样。</p>
<h4 id="参数名映射"><a href="#参数名映射" class="headerlink" title="参数名映射"></a>参数名映射</h4><p>在默认情况下，URL中的传入的参数和我们之前定义的参数名一一映射。例如，在<code>queryParams</code>中定义了一个名为<code>foo</code>的参数，所以在URL里含有例如<code>?foo=1</code>时，就能拿到参数对应的值了。但我们也可以手动改变参数名的一一对应关系，设置别名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: &#123;</div><div class="line">    <span class="attr">category</span>: <span class="string">'articles_category'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">category</span>: <span class="literal">null</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>在这之后，URL中传入<code>articles_category</code>参数，会作为controller中的<code>category</code>变量。</p>
<p>如果我们有多个参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: [<span class="string">'page'</span>, <span class="string">'filter'</span>, &#123;</div><div class="line">    <span class="attr">category</span>: <span class="string">'articles_category'</span></div><div class="line">  &#125;],</div><div class="line">  <span class="attr">category</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">page</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">filter</span>: <span class="string">'recent'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="默认值和反序列化"><a href="#默认值和反序列化" class="headerlink" title="默认值和反序列化"></a>默认值和反序列化</h4><p>例如下面的例子，<code>page</code>参数被设置为默认是1：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/controllers/articles.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Controller.extend(&#123;</div><div class="line">  <span class="attr">queryParams</span>: <span class="string">'page'</span>,</div><div class="line">  <span class="attr">page</span>: <span class="number">1</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>查询到的page的值会根据默认值的类型进行转化。因为定义了默认值为1，所以之后查询到的所有值都会被转化为int类型</li>
<li>当参数为<code>?page=1</code>的时候，路由会被转化为<code>/articles</code>，为2时则是<code>/articles?page=2</code>，依次类推</li>
</ul>
<h4 id="粘性参数"><a href="#粘性参数" class="headerlink" title="粘性参数"></a><a href="https://guides.emberjs.com/v2.7.0/routing/query-params/#toc_sticky-query-param-values" target="_blank" rel="external">粘性参数</a></h4><p>默认情况下，在Ember中查询参数是粘性的，即当你改变了查询参数，或者是离开页面之后又退回来，参数会默认在URL上，而不会自动清除</p>
<h3 id="异步路由"><a href="#异步路由" class="headerlink" title="异步路由"></a><a href="https://guides.emberjs.com/v2.7.0/routing/asynchronous-routing/" target="_blank" rel="external">异步路由</a></h3>
  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ember初步–Routing"><span class="toc-number">1.</span> <span class="toc-text">Ember初步–Routing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义路由"><span class="toc-number">1.1.</span> <span class="toc-text">定义路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本路由"><span class="toc-number">1.1.1.</span> <span class="toc-text">基本路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nested-Routes"><span class="toc-number">1.1.2.</span> <span class="toc-text">Nested Routes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#application-route"><span class="toc-number">1.1.3.</span> <span class="toc-text">application route</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index-route"><span class="toc-number">1.1.4.</span> <span class="toc-text">index route</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#动态片段"><span class="toc-number">1.1.5.</span> <span class="toc-text">动态片段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#全局路由-多URL匹配的路由"><span class="toc-number">1.1.6.</span> <span class="toc-text">全局路由/多URL匹配的路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Route-Model"><span class="toc-number">1.2.</span> <span class="toc-text">Route Model</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#静态model"><span class="toc-number">1.2.1.</span> <span class="toc-text">静态model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#动态model"><span class="toc-number">1.2.2.</span> <span class="toc-text">动态model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多model"><span class="toc-number">1.2.3.</span> <span class="toc-text">多model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#渲染模板"><span class="toc-number">1.3.</span> <span class="toc-text">渲染模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重定向"><span class="toc-number">1.4.</span> <span class="toc-text">重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Transitioning-Before-the-Model-is-Known"><span class="toc-number">1.4.1.</span> <span class="toc-text">Transitioning Before the Model is Known</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Transitioning-After-the-Model-is-Known"><span class="toc-number">1.4.2.</span> <span class="toc-text">Transitioning After the Model is Known</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#子路由"><span class="toc-number">1.4.3.</span> <span class="toc-text">子路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#阻止和重试路由跳转"><span class="toc-number">1.5.</span> <span class="toc-text">阻止和重试路由跳转</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通过willTransition阻止路由跳转"><span class="toc-number">1.5.1.</span> <span class="toc-text">通过willTransition阻止路由跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过model内的beforeModel和afterModel方法阻止跳转"><span class="toc-number">1.5.2.</span> <span class="toc-text">通过model内的beforeModel和afterModel方法阻止跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#储存-重试路由转变"><span class="toc-number">1.5.3.</span> <span class="toc-text">储存/重试路由转变</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loading-Error状态"><span class="toc-number">1.6.</span> <span class="toc-text">Loading/Error状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loading状态"><span class="toc-number">1.6.1.</span> <span class="toc-text">loading状态</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#加载loading模板"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">加载loading模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#loading事件"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">loading事件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#error状态"><span class="toc-number">1.6.2.</span> <span class="toc-text">error状态</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#error模板"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">error模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#error事件"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">error事件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL参数"><span class="toc-number">1.7.</span> <span class="toc-text">URL参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#特定的URL参数"><span class="toc-number">1.7.1.</span> <span class="toc-text">特定的URL参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过link-tohelper给URL带上参数"><span class="toc-number">1.7.2.</span> <span class="toc-text">通过link-tohelper给URL带上参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过transitionTo加参数"><span class="toc-number">1.7.3.</span> <span class="toc-text">通过transitionTo加参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Opting-into-a-full-transition"><span class="toc-number">1.7.4.</span> <span class="toc-text">Opting into a full transition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用replaceState更新路由"><span class="toc-number">1.7.5.</span> <span class="toc-text">使用replaceState更新路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参数名映射"><span class="toc-number">1.7.6.</span> <span class="toc-text">参数名映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认值和反序列化"><span class="toc-number">1.7.7.</span> <span class="toc-text">默认值和反序列化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#粘性参数"><span class="toc-number">1.7.8.</span> <span class="toc-text">粘性参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#异步路由"><span class="toc-number">1.8.</span> <span class="toc-text">异步路由</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&text=Ember初步--Routing"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&is_video=false&description=Ember初步--Routing"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ember初步--Routing&body=Check out this article: http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&title=Ember初步--Routing"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Routing/&name=Ember初步--Routing&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 ecmadao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    <script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'ecmadao-blog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
