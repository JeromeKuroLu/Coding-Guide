<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Table of Contents  generated with DocToc

Ember初步–Template
内建的helper方法
get方法
concat方法


条件语句
if
unless


列表
显示对象的键
重新渲染
序列
空列表


绑定元素属性
Link
带有变量的link-to
给link设置查询参数
replace history entries


Action">
<meta property="og:type" content="article">
<meta property="og:title" content="Ember初步--Template">
<meta property="og:url" content="http://ecmadao.com/2017/01/13/Notes/ember/Ember初步--Template/index.html">
<meta property="og:site_name" content="ecmadao">
<meta property="og:description" content="Table of Contents  generated with DocToc

Ember初步–Template
内建的helper方法
get方法
concat方法


条件语句
if
unless


列表
显示对象的键
重新渲染
序列
空列表


绑定元素属性
Link
带有变量的link-to
给link设置查询参数
replace history entries


Action">
<meta property="og:updated_time" content="2017-01-14T12:11:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ember初步--Template">
<meta name="twitter:description" content="Table of Contents  generated with DocToc

Ember初步–Template
内建的helper方法
get方法
concat方法


条件语句
if
unless


列表
显示对象的键
重新渲染
序列
空列表


绑定元素属性
Link
带有变量的link-to
给link设置查询参数
replace history entries


Action">
    
    
        
          
              <link rel="shortcut icon" href="/Coding-Guide/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/Coding-Guide/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/Coding-Guide/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Ember初步--Template</title>
    <!-- styles -->
    <link rel="stylesheet" href="/Coding-Guide/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/Coding-Guide/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/Coding-Guide/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/Coding-Guide/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/Coding-Guide/lib/jquery/jquery.min.js"></script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Model/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/Coding-Guide/2017/01/13/Notes/前端工程/Chrome扩展程序开发/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&text=Ember初步--Template"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&is_video=false&description=Ember初步--Template"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ember初步--Template&body=Check out this article: http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&name=Ember初步--Template&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ember初步–Template"><span class="toc-number">1.</span> <span class="toc-text">Ember初步–Template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内建的helper方法"><span class="toc-number">1.1.</span> <span class="toc-text">内建的helper方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#get方法"><span class="toc-number">1.1.1.</span> <span class="toc-text">get方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#concat方法"><span class="toc-number">1.1.2.</span> <span class="toc-text">concat方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件语句"><span class="toc-number">1.2.</span> <span class="toc-text">条件语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if"><span class="toc-number">1.2.1.</span> <span class="toc-text">if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unless"><span class="toc-number">1.2.2.</span> <span class="toc-text">unless</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列表"><span class="toc-number">1.3.</span> <span class="toc-text">列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示对象的键"><span class="toc-number">1.4.</span> <span class="toc-text">显示对象的键</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#重新渲染"><span class="toc-number">1.4.1.</span> <span class="toc-text">重新渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#序列"><span class="toc-number">1.4.2.</span> <span class="toc-text">序列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#空列表"><span class="toc-number">1.4.3.</span> <span class="toc-text">空列表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绑定元素属性"><span class="toc-number">1.5.</span> <span class="toc-text">绑定元素属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Link"><span class="toc-number">1.6.</span> <span class="toc-text">Link</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#带有变量的link-to"><span class="toc-number">1.6.1.</span> <span class="toc-text">带有变量的link-to</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#给link设置查询参数"><span class="toc-number">1.6.2.</span> <span class="toc-text">给link设置查询参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace-history-entries"><span class="toc-number">1.6.3.</span> <span class="toc-text">replace history entries</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Action-Helper"><span class="toc-number">1.7.</span> <span class="toc-text">Action Helper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#action的参数"><span class="toc-number">1.7.1.</span> <span class="toc-text">action的参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#由特定的事件触发action"><span class="toc-number">1.7.2.</span> <span class="toc-text">由特定的事件触发action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#由特定按键触发事件"><span class="toc-number">1.7.3.</span> <span class="toc-text">由特定按键触发事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#处理浏览器默认行为"><span class="toc-number">1.7.4.</span> <span class="toc-text">处理浏览器默认行为</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#单向数据绑定"><span class="toc-number">1.7.5.</span> <span class="toc-text">单向数据绑定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-Helper"><span class="toc-number">1.8.</span> <span class="toc-text">Input Helper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Helper"><span class="toc-number">1.9.</span> <span class="toc-text">Development Helper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#log"><span class="toc-number">1.9.1.</span> <span class="toc-text">log</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#debug"><span class="toc-number">1.9.2.</span> <span class="toc-text">debug</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写自己的helper"><span class="toc-number">1.10.</span> <span class="toc-text">写自己的helper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#helper命名"><span class="toc-number">1.10.1.</span> <span class="toc-text">helper命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#helper的参数"><span class="toc-number">1.10.2.</span> <span class="toc-text">helper的参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命名参数"><span class="toc-number">1.10.3.</span> <span class="toc-text">命名参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤helper里返回的HTML"><span class="toc-number">1.11.</span> <span class="toc-text">过滤helper里返回的HTML</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Ember初步--Template
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ecmadao</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-01-13T05:58:37.000Z" itemprop="datePublished">2017-01-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/Coding-Guide/tags/ember/">ember</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong>  <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="external">DocToc</a></em></p>
<ul>
<li><a href="#ember%E5%88%9D%E6%AD%A5--template">Ember初步–Template</a><ul>
<li><a href="#%E5%86%85%E5%BB%BA%E7%9A%84helper%E6%96%B9%E6%B3%95">内建的helper方法</a><ul>
<li><a href="#get%E6%96%B9%E6%B3%95"><code>get</code>方法</a></li>
<li><a href="#concat%E6%96%B9%E6%B3%95"><code>concat</code>方法</a></li>
</ul>
</li>
<li><a href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5">条件语句</a><ul>
<li><a href="#if">if</a></li>
<li><a href="#unless">unless</a></li>
</ul>
</li>
<li><a href="#%E5%88%97%E8%A1%A8">列表</a></li>
<li><a href="#%E6%98%BE%E7%A4%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%94%AE">显示对象的键</a><ul>
<li><a href="#%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93">重新渲染</a></li>
<li><a href="#%E5%BA%8F%E5%88%97">序列</a></li>
<li><a href="#%E7%A9%BA%E5%88%97%E8%A1%A8">空列表</a></li>
</ul>
</li>
<li><a href="#%E7%BB%91%E5%AE%9A%E5%85%83%E7%B4%A0%E5%B1%9E%E6%80%A7">绑定元素属性</a></li>
<li><a href="#link">Link</a><ul>
<li><a href="#%E5%B8%A6%E6%9C%89%E5%8F%98%E9%87%8F%E7%9A%84link-to">带有变量的<code>link-to</code></a></li>
<li><a href="#%E7%BB%99link%E8%AE%BE%E7%BD%AE%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0">给link设置查询参数</a></li>
<li><a href="#replace-history-entries">replace history entries</a></li>
</ul>
</li>
<li><a href="#action-helper">Action Helper</a><ul>
<li><a href="#action%E7%9A%84%E5%8F%82%E6%95%B0">action的参数</a></li>
<li><a href="#%E7%94%B1%E7%89%B9%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91action">由特定的事件触发action</a></li>
<li><a href="#%E7%94%B1%E7%89%B9%E5%AE%9A%E6%8C%89%E9%94%AE%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6">由特定按键触发事件</a></li>
<li><a href="#%E5%A4%84%E7%90%86%E6%B5%8F%E8%A7%88%E5%99%A8%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA">处理浏览器默认行为</a></li>
<li><a href="#%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A">单向数据绑定</a></li>
</ul>
</li>
<li><a href="#input-helper">Input Helper</a></li>
<li><a href="#development-helper">Development Helper</a><ul>
<li><a href="#log">log</a></li>
<li><a href="#debug">debug</a></li>
</ul>
</li>
<li><a href="#%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84helper">写自己的helper</a><ul>
<li><a href="#helper%E5%91%BD%E5%90%8D">helper命名</a></li>
<li><a href="#helper%E7%9A%84%E5%8F%82%E6%95%B0">helper的参数</a></li>
<li><a href="#%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0">命名参数</a></li>
</ul>
</li>
<li><a href="#%E8%BF%87%E6%BB%A4helper%E9%87%8C%E8%BF%94%E5%9B%9E%E7%9A%84html">过滤helper里返回的HTML</a></li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="Ember初步–Template"><a href="#Ember初步–Template" class="headerlink" title="Ember初步–Template"></a>Ember初步–Template</h2><p>Ember使用<a href="http://www.handlebarsjs.com/" target="_blank" rel="external">Handlebars</a>作为模板引擎，并使用<code>{{}}</code>的方式来渲染变量。</p>
<p>除此以外，我们可以自己写helper方法，作为在模板内调用的调用的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/sum.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">params</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> params.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> a + b;</div><div class="line">  &#125;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(sum);</div></pre></td></tr></table></figure>
<p>usage:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Total: &#123;&#123;sum 1 2 3&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="内建的helper方法"><a href="#内建的helper方法" class="headerlink" title="内建的helper方法"></a>内建的helper方法</h3><h4 id="get方法"><a href="#get方法" class="headerlink" title="get方法"></a><code>get</code>方法</h4><p><code>get</code>方法可用于获取key对应的value：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;get address city&#125;&#125;</div><div class="line"><span class="comment">&lt;!-- 等价于 this.get('address.city') --&gt;</span></div></pre></td></tr></table></figure>
<h4 id="concat方法"><a href="#concat方法" class="headerlink" title="concat方法"></a><code>concat</code>方法</h4><p><code>concat</code>方法用于合并字符串</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;concat "item" 1&#125;&#125;</div><div class="line"><span class="comment">&lt;!-- result is "item1" --&gt;</span></div><div class="line"></div><div class="line">&#123;&#123;get "foo" (concat "item" index)&#125;&#125;</div><div class="line"><span class="comment">&lt;!-- 当index为1时，上式等价于 --&gt;</span></div><div class="line"><span class="comment">&lt;!-- this.get("foo.item1") --&gt;</span></div></pre></td></tr></table></figure>
<h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;if isTrue 'true' 'false'&#125;&#125;</div><div class="line"><span class="comment">&lt;!-- 当isTrue为true的时候返回'true'，否则返回'false' --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"foo &#123;&#123;if isActive "</span><span class="attr">active</span>" "<span class="attr">disabled</span>"&#125;&#125;"&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    &#123;&#123;if isTrue (if isActive "isActive")&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#if isTrue&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>isTrue<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;&#123;/if&#125;&#125;</div><div class="line"></div><div class="line">&#123;&#123;#if isTrue&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>isTrye<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;&#123;else if isActive&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>isActive<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;&#123;else&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>isDisabled<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;&#123;/if&#125;&#125;</div></pre></td></tr></table></figure>
<h4 id="unless"><a href="#unless" class="headerlink" title="unless"></a>unless</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#unless isFalse&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>isTrue<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;&#123;/unless&#125;&#125;</div></pre></td></tr></table></figure>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>假设route-handler返回了一个列表：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/routes/list.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</div><div class="line">  model() &#123;</div><div class="line">    <span class="keyword">return</span> [</div><div class="line">        &#123;<span class="attr">name</span>: <span class="string">'ecmadao'</span>, <span class="attr">age</span>: <span class="number">1</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>: <span class="string">'ws'</span>, <span class="attr">age</span>: <span class="number">2</span>&#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- app/template/list.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">    &#123;&#123;#each model as |peopel index|&#125;&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">            name: &#123;&#123;people.name&#125;&#125;,</div><div class="line">            age: &#123;&#123;people.age&#125;&#125;,</div><div class="line">            index: &#123;&#123;index&#125;&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    &#123;&#123;/each&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>{{#each}}</code>helper还有<code>{{else}}</code>语句。当Array为空时会被触发：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#each model as |people|&#125;&#125;</div><div class="line">    Hello, &#123;&#123;people.name&#125;&#125;</div><div class="line">&#123;&#123;else&#125;&#125;</div><div class="line">    Nobody here</div><div class="line">&#123;&#123;/each&#125;&#125;</div></pre></td></tr></table></figure>
<h3 id="显示对象的键"><a href="#显示对象的键" class="headerlink" title="显示对象的键"></a>显示对象的键</h3><p>可以使用<code>{{#each-in}}</code>来显示对象的键：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/components/store-categories.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</div><div class="line">  willRender() &#123;</div><div class="line">    <span class="keyword">this</span>.set(<span class="string">'categories'</span>, &#123;</div><div class="line">      <span class="string">'Bourbons'</span>: [<span class="string">'Bulleit'</span>, <span class="string">'Four Roses'</span>, <span class="string">'Woodford Reserve'</span>],</div><div class="line">      <span class="string">'Ryes'</span>: [<span class="string">'WhistlePig'</span>, <span class="string">'High West'</span>]</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- /app/templates/components/store-categories.hbs</span></div><div class="line"> --&gt;</div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  &#123;&#123;#each-in categories as |category products|&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;category&#125;&#125;</div><div class="line">      <span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line">        &#123;&#123;#each products as |product|&#125;&#125;</div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;product&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        &#123;&#123;/each&#125;&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  &#123;&#123;/each-in&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Bourbons</div><div class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Bulleit<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Four Roses<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Woodford Reserve<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Ryes</div><div class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>WhistlePig<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>High West<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="重新渲染"><a href="#重新渲染" class="headerlink" title="重新渲染"></a>重新渲染</h4><p>但是<code>{{#each-in}}</code>并不会监听到数据的变化。也就是说在上面的<code>categories</code>里增加数据的时候，模板不会自动的重新渲染更新：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/components/store-categories.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</div><div class="line">  willRender() &#123;</div><div class="line">    <span class="keyword">this</span>.set(<span class="string">'categories'</span>, &#123;</div><div class="line">      <span class="string">'Bourbons'</span>: [<span class="string">'Bulleit'</span>, <span class="string">'Four Roses'</span>, <span class="string">'Woodford Reserve'</span>],</div><div class="line">      <span class="string">'Ryes'</span>: [<span class="string">'WhistlePig'</span>, <span class="string">'High West'</span>]</div><div class="line">    &#125;);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    addCategory(category) &#123;</div><div class="line">      <span class="comment">// This won't work!</span></div><div class="line">      <span class="keyword">let</span> categories = <span class="keyword">this</span>.get(<span class="string">'categories'</span>);</div><div class="line">      categories[category] = [];</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>为了能够让数据监听正常工作，需要手动在数据更改之后调用<code>rerender()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// /app/components/store-categories.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</div><div class="line">  willRender() &#123;</div><div class="line">    <span class="keyword">this</span>.set(<span class="string">'categories'</span>, &#123;</div><div class="line">      <span class="string">'Bourbons'</span>: [<span class="string">'Bulleit'</span>, <span class="string">'Four Roses'</span>, <span class="string">'Woodford Reserve'</span>],</div><div class="line">      <span class="string">'Ryes'</span>: [<span class="string">'WhistlePig'</span>, <span class="string">'High West'</span>]</div><div class="line">    &#125;);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    addCategory(category) &#123;</div><div class="line">      <span class="keyword">let</span> categories = <span class="keyword">this</span>.get(<span class="string">'categories'</span>);</div><div class="line">      categories[category] = [];</div><div class="line"></div><div class="line">      <span class="comment">// A manual re-render causes the DOM to be updated</span></div><div class="line">      <span class="keyword">this</span>.rerender();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h4><p>获取的key的顺序和Object中key的顺序一致。</p>
<h4 id="空列表"><a href="#空列表" class="headerlink" title="空列表"></a>空列表</h4><p><code>{{#each-in}}</code>也支持<code>{{else}}</code>来应对空列表的状态：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#each-in people as |name person|&#125;&#125;</div><div class="line">  Hello, &#123;&#123;name&#125;&#125;! You are &#123;&#123;person.age&#125;&#125; years old.</div><div class="line">&#123;&#123;else&#125;&#125;</div><div class="line">  Sorry, nobody is here.</div><div class="line">&#123;&#123;/each-in&#125;&#125;</div></pre></td></tr></table></figure>
<h3 id="绑定元素属性"><a href="#绑定元素属性" class="headerlink" title="绑定元素属性"></a>绑定元素属性</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"logo"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;&#123;logoUrl&#125;&#125;</span> <span class="attr">alt</span>=<span class="string">"Logo"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">disabled</span>=<span class="string">&#123;&#123;isAdministrator&#125;&#125;</span>&gt;</span></div></pre></td></tr></table></figure>
<p>但是默认情况下Ember不会绑定形如<code>data-xxx</code>的属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#link-to "photos" data-toggle="dropdown"&#125;&#125;Photos&#123;&#123;/link-to&#125;&#125;</div><div class="line"></div><div class="line">&#123;&#123;input type="text" data-toggle="tooltip" data-placement="bottom" title="Name"&#125;&#125;</div></pre></td></tr></table></figure>
<p>只能渲染为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"ember239"</span> <span class="attr">class</span>=<span class="string">"ember-view"</span> <span class="attr">href</span>=<span class="string">"#/photos"</span>&gt;</span>Photos<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"ember257"</span> <span class="attr">class</span>=<span class="string">"ember-view ember-text-field"</span> <span class="attr">type</span>=<span class="string">"text"</span></span></div><div class="line">       <span class="attr">title</span>=<span class="string">"Name"</span>&gt;</div></pre></td></tr></table></figure>
<p>为了能够绑定<code>data-xxx</code>属性，需要手动在view文件中设置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ember generate view binding-element-attributes</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/view/binding-element-attributes.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.View.extend(&#123;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Ember.TextField.reopen(&#123;</div><div class="line">    <span class="attr">attributeBindings</span>: [<span class="string">'data-toggle'</span>, <span class="string">'data-placement'</span>]</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Ember.LinkComponent.reopen(&#123;</div><div class="line">    <span class="attr">attributeBindings</span>: [<span class="string">'data-toggle'</span>]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><p><code>{{link-to}}</code>helper方法</p>
<h4 id="带有变量的link-to"><a href="#带有变量的link-to" class="headerlink" title="带有变量的link-to"></a>带有变量的<code>link-to</code></h4><p>看下例子感受感受学习一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/router.js</span></div><div class="line">Router.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.route(<span class="string">'photos'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.route(<span class="string">'edit'</span>, &#123; <span class="attr">path</span>: <span class="string">'/:photo_id'</span> &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- app/templates/photos.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  &#123;&#123;#each photos as |photo|&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;#link-to "photos.edit" photo&#125;&#125;&#123;&#123;photo.title&#125;&#125;&#123;&#123;/link-to&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  &#123;&#123;/each&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/photos/1"</span>&gt;</span>Happy Kittens<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/photos/2"</span>&gt;</span>Puppy Running<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/photos/3"</span>&gt;</span>Mountain Landscape<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>并且，当当前的URL和某一个link匹配时，会自动给<code>&lt;a&gt;</code>标签加上<code>active</code>方法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 当前在/photos/2页面 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/photos/1"</span>&gt;</span>Happy Kittens<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/photos/2"</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span>Puppy Running<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/photos/3"</span>&gt;</span>Mountain Landscape<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="给link设置查询参数"><a href="#给link设置查询参数" class="headerlink" title="给link设置查询参数"></a>给link设置查询参数</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;#link-to "posts" (query-params direction="asc")&#125;&#125;Sort&#123;&#123;/link-to&#125;&#125;</div><div class="line"></div><div class="line">&#123;&#123;#link-to "posts" (query-params direction=otherDirection)&#125;&#125;Sort&#123;&#123;/link-to&#125;&#125;</div></pre></td></tr></table></figure>
<h4 id="replace-history-entries"><a href="#replace-history-entries" class="headerlink" title="replace history entries"></a>replace history entries</h4><p><code>{{link-to}}</code>的默认行为会给浏览器的历史新增一个路由入口。也就是说，当用户点击link的时候，浏览器的历史里会增加他刚刚点击的这个链接。而通过设置<code>replace=true</code>，则用户点击链接的时候，该链接会替代浏览器当前所处的历史记录，而不是新增进去。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- /index.html --&gt;</span></div><div class="line">&#123;&#123;#link-to "/about" replace=true&#125;&#125;about&#123;&#123;/link-to&#125;&#125;</div></pre></td></tr></table></figure>
<p>假设在index页面，浏览器的历史记录是：</p>
<p>[…, A.html, index.html]</p>
<p>若点击正常的about，则历史记录变成：</p>
<p>[…, A.html, index.html, about.html]</p>
<p>但设置了<code>replace=true</code>，则在点击之后历史记录为：</p>
<p>[…, A.html, about.html]</p>
<h3 id="Action-Helper"><a href="#Action-Helper" class="headerlink" title="Action Helper"></a>Action Helper</h3><p>当你给任意HTML DOM元素添加<code>{{action}}</code>helper的时候，都会触发通过action绑定在DOM上的事件，而那个事件是由template对应的component或者controller所提供：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- app/templates/components/single-post.hbs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> &#123;&#123;<span class="attr">action</span> "<span class="attr">toggleBody</span>"&#125;&#125;&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">&#123;&#123;#if isShowingBody&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;&#123;body&#125;&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">&#123;&#123;/if&#125;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/components/single-post.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    toggleBody() &#123;</div><div class="line">      <span class="keyword">this</span>.toggleProperty(<span class="string">'isShowingBody'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="action的参数"><a href="#action的参数" class="headerlink" title="action的参数"></a>action的参数</h4><p>如果action需要接收参数，则调用方法为<code>{{action actionName params}}</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> &#123;&#123;<span class="attr">action</span> "<span class="attr">select</span>" <span class="attr">post</span>&#125;&#125;&gt;</span>✓<span class="tag">&lt;/<span class="name">button</span>&gt;</span> &#123;&#123;post.title&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/components/single-post.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</div><div class="line">  <span class="attr">actions</span>: &#123;</div><div class="line">    select(post) &#123;</div><div class="line">      <span class="built_in">console</span>.log(post.get(<span class="string">'title'</span>));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="由特定的事件触发action"><a href="#由特定的事件触发action" class="headerlink" title="由特定的事件触发action"></a>由特定的事件触发action</h4><p>在默认情况下，点击事件会触发action。但可以通过设置<code>on=&quot;XXX&quot;</code>来指定事件的触发：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 只有mouse up的时候才会触发事件 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> &#123;&#123;<span class="attr">action</span> "<span class="attr">select</span>" <span class="attr">post</span> <span class="attr">on</span>=<span class="string">"mouseUp"</span>&#125;&#125;&gt;</span>✓<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  &#123;&#123;post.title&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="由特定按键触发事件"><a href="#由特定按键触发事件" class="headerlink" title="由特定按键触发事件"></a>由特定按键触发事件</h4><p>可以通过<code>allowedKey</code>来指定触发事件啊按键：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 只有alt才能触发 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> &#123;&#123;<span class="attr">action</span> "<span class="attr">anActionName</span>" <span class="attr">allowedKeys</span>=<span class="string">"alt"</span>&#125;&#125;&gt;</span></div><div class="line">  click me</div><div class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="处理浏览器默认行为"><a href="#处理浏览器默认行为" class="headerlink" title="处理浏览器默认行为"></a>处理浏览器默认行为</h4><p>在默认情况下。action会阻止浏览器的默认行为，即起到<code>e.preventDafault</code>的作用。如果不想阻止默认行为，则要手动添加<code>preventDefault=false</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"newPage.htm"</span> &#123;&#123;<span class="attr">action</span> "<span class="attr">logClick</span>" <span class="attr">preventDefault</span>=<span class="string">false&#125;&#125;</span>&gt;</span>Go<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>即：</p>
<ul>
<li>当没有<code>preventDefault=false</code>的时候，点击链接会触发action事件，而不会导航到新的链接</li>
<li>当存在<code>preventDefault=false</code>的时候，点击链接则正常导航到新链接</li>
</ul>
<h4 id="单向数据绑定"><a href="#单向数据绑定" class="headerlink" title="单向数据绑定"></a>单向数据绑定</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>What's your favorite band?<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">&#123;&#123;favoriteBand&#125;&#125;</span> <span class="attr">onblur</span>=<span class="string">&#123;&#123;action</span> "<span class="attr">bandDidChange</span>" <span class="attr">value</span>=<span class="string">"target.value"</span>&#125;&#125; /&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">actions: &#123;</div><div class="line">  bandDidChange(newValue) &#123;</div><div class="line">    <span class="built_in">console</span>.log(newValue);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Input-Helper"><a href="#Input-Helper" class="headerlink" title="Input Helper"></a><a href="https://guides.emberjs.com/v2.7.0/templates/input-helpers/" target="_blank" rel="external">Input Helper</a></h3><p><code>{{input}}</code>和<code>{{textarea}}</code>两个方法是Ember提供的便捷helper。<code>{{input}}</code>封装了<code>Ember.TextField</code>和<code>Ember.Checkbox</code>，而<code>{{textarea}}</code>方法则是封装了<code>Ember.TextArea</code></p>
<p>关于他们的具体使用可戳标题链接或者<a href="https://guides.emberjs.com/v2.7.0/templates/input-helpers/" target="_blank" rel="external">这里</a></p>
<h3 id="Development-Helper"><a href="#Development-Helper" class="headerlink" title="Development Helper"></a>Development Helper</h3><h4 id="log"><a href="#log" class="headerlink" title="log"></a>log</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;log XXXX&#125;&#125;</div></pre></td></tr></table></figure>
<p>效果相当于<code>console.log()</code></p>
<h4 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;debugger&#125;&#125;</div></pre></td></tr></table></figure>
<h3 id="写自己的helper"><a href="#写自己的helper" class="headerlink" title="写自己的helper"></a>写自己的helper</h3><p>通过建立自己的helper，我们可以在template里便捷的引用并获得想要的结果。</p>
<blockquote>
<p>helper 接受Array作为参数</p>
</blockquote>
<p>例如，创建一个格式化金额显示的helper</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ember g helper format-currency</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/format-currency.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">formatCurrency</span>(<span class="params">[value, ...rest]</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> dollars = <span class="built_in">Math</span>.floor(value / <span class="number">100</span>);</div><div class="line">  <span class="keyword">let</span> cents = value % <span class="number">100</span>;</div><div class="line">  <span class="keyword">let</span> sign = <span class="string">'$'</span>;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (cents.toString().length === <span class="number">1</span>) &#123; cents = <span class="string">'0'</span> + cents; &#125;</div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;sign&#125;</span><span class="subst">$&#123;dollars&#125;</span>.<span class="subst">$&#123;cents&#125;</span>`</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(formatCurrency);</div></pre></td></tr></table></figure>
<p>usage:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>total cost: &#123;&#123;format-currency 250&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>total cost: $2.50<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="helper命名"><a href="#helper命名" class="headerlink" title="helper命名"></a>helper命名</h4><p>component的名称要求多个单词组成，单词中间带有<code>-</code>，而helper则没有命名限制，一个或多个单词都可以。但多个单词间要以<code>-</code>链接</p>
<h4 id="helper的参数"><a href="#helper的参数" class="headerlink" title="helper的参数"></a>helper的参数</h4><p>在template中，你可以给helper传递一个或多个参数。因此helper方法本身接受一个Array作为参数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;my-helper "hello" "world"&#125;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/my-helper.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> [arg1, arg2] = params;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(arg1); <span class="comment">// =&gt; "hello"</span></div><div class="line">  <span class="built_in">console</span>.log(arg2); <span class="comment">// =&gt; "world"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="命名参数"><a href="#命名参数" class="headerlink" title="命名参数"></a>命名参数</h4><p>helper可以指定参数的名称，因此在调用的时候可以打乱参数顺序：</p>
<blockquote>
<p>命名参数全部合在一起作为一个Object传给helper方法</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/format-currency.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">[value, ...rest], namedArgs</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> dollars = <span class="built_in">Math</span>.floor(value / <span class="number">100</span>);</div><div class="line">    <span class="keyword">let</span> cents = value % <span class="number">100</span>;</div><div class="line">    <span class="keyword">let</span> sign = namedArgs.sign === <span class="literal">undefined</span> ? <span class="string">'$'</span> : namedArgs.signp;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (cents.toString().length === <span class="number">1</span>) &#123; cents = <span class="string">'0'</span> + cents; &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;sign&#125;</span><span class="subst">$&#123;dollars&#125;</span>.<span class="subst">$&#123;cents&#125;</span>`</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;format-currency 350 sign="￥"&#125;&#125;</div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line">￥3.5</div></pre></td></tr></table></figure>
<p>注意，命名参数在helper内，是作为一个整体的Object：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;my-helper option1="hello" option2="world" option3="goodbye cruel world"&#125;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/my-helper.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">params, namedArgs</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(namedArgs.option1); <span class="comment">// =&gt; "hello"</span></div><div class="line">  <span class="built_in">console</span>.log(namedArgs.option2); <span class="comment">// =&gt; "world"</span></div><div class="line">  <span class="built_in">console</span>.log(namedArgs.option3); <span class="comment">// =&gt; "goodbye cruel world"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>或者你也可以这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/my-helper.j</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">params, &#123; option1, option2, option3 &#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(option1); <span class="comment">// =&gt; "hello"</span></div><div class="line">  <span class="built_in">console</span>.log(option2); <span class="comment">// =&gt; "world"</span></div><div class="line">  <span class="built_in">console</span>.log(option3); <span class="comment">// =&gt; "goodbye cruel world"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="过滤helper里返回的HTML"><a href="#过滤helper里返回的HTML" class="headerlink" title="过滤helper里返回的HTML"></a>过滤helper里返回的HTML</h3><p>来创建一个生成<code>&lt;b&gt;</code>标签的helper：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/make-bold.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">[param, ...rest]</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`&lt;b&gt;<span class="subst">$&#123;param&#125;</span>&lt;/b&gt;`</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>然后调用它：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;make-bold "Hello World"&#125;&#125;</div></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&amp;lt;b&amp;gt;Hello World&amp;lt;/b&amp;gt;</div></pre></td></tr></table></figure>
<p>这是因为Ember禁止直接从方法里返回并插入一段HTML代码，以防止跨域的脚本攻击。想要成功的插入HTML，需要使用Ember的<code>htmlSafe</code>方法，将其转化为安全的形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/make-bold.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">[param, ...rest]</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> Ember.String.htmlSafe(<span class="string">`&lt;b&gt;<span class="subst">$&#123;param&#125;</span>&lt;/b&gt;`</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>但需要重视的是，即便我们是通过<code>htmlSafe</code>返回了<code>SafeString</code>，也有可能受到XSS攻击。比如，一段聊天室的代码是这样的：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Welcome back! &#123;&#123;make-bold model.firstName&#125;&#125; has joined the channel.</div></pre></td></tr></table></figure>
<p>此时，一个恶意的用户或许可以把他的<code>firstName</code>写成是一段以<code>&lt;script&gt;</code>包含的代码，被我们的方法调用之后，就相当于往DOM里插入了一段JS。所以说，不建议通过这种形式在HTML里面插入DOM，如果想做，可以通过component来完成。</p>
<p>但如果你真的真的非常想还是使用这样的方式插入DOM的话，则要确保自己已经将那些不可信的内容过滤过：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app/helpers/make-bold.js</span></div><div class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">'ember'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="function"><span class="keyword">function</span>(<span class="params">[param, ...rest]</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> value = Ember.Handlebars.Utils.escapeExpression(param);</div><div class="line">  <span class="keyword">return</span> Ember.String.htmlSafe(<span class="string">`&lt;b&gt;<span class="subst">$&#123;value&#125;</span>&lt;/b&gt;`</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>现在在把一段被<code>&lt;script&gt;</code>标签包裹的代码代入进去，会发现<code>&lt;script&gt;</code>被过滤掉了：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Welcome back! <span class="tag">&lt;<span class="name">b</span>&gt;</span>&amp;lt;script</div><div class="line">type="javascript"&amp;gt;alert('pwned!');&amp;lt;/script&amp;gt;<span class="tag">&lt;/<span class="name">b</span>&gt;</span> has joined the channel.</div></pre></td></tr></table></figure>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ember初步–Template"><span class="toc-number">1.</span> <span class="toc-text">Ember初步–Template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内建的helper方法"><span class="toc-number">1.1.</span> <span class="toc-text">内建的helper方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#get方法"><span class="toc-number">1.1.1.</span> <span class="toc-text">get方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#concat方法"><span class="toc-number">1.1.2.</span> <span class="toc-text">concat方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件语句"><span class="toc-number">1.2.</span> <span class="toc-text">条件语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if"><span class="toc-number">1.2.1.</span> <span class="toc-text">if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unless"><span class="toc-number">1.2.2.</span> <span class="toc-text">unless</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列表"><span class="toc-number">1.3.</span> <span class="toc-text">列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示对象的键"><span class="toc-number">1.4.</span> <span class="toc-text">显示对象的键</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#重新渲染"><span class="toc-number">1.4.1.</span> <span class="toc-text">重新渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#序列"><span class="toc-number">1.4.2.</span> <span class="toc-text">序列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#空列表"><span class="toc-number">1.4.3.</span> <span class="toc-text">空列表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绑定元素属性"><span class="toc-number">1.5.</span> <span class="toc-text">绑定元素属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Link"><span class="toc-number">1.6.</span> <span class="toc-text">Link</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#带有变量的link-to"><span class="toc-number">1.6.1.</span> <span class="toc-text">带有变量的link-to</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#给link设置查询参数"><span class="toc-number">1.6.2.</span> <span class="toc-text">给link设置查询参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace-history-entries"><span class="toc-number">1.6.3.</span> <span class="toc-text">replace history entries</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Action-Helper"><span class="toc-number">1.7.</span> <span class="toc-text">Action Helper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#action的参数"><span class="toc-number">1.7.1.</span> <span class="toc-text">action的参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#由特定的事件触发action"><span class="toc-number">1.7.2.</span> <span class="toc-text">由特定的事件触发action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#由特定按键触发事件"><span class="toc-number">1.7.3.</span> <span class="toc-text">由特定按键触发事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#处理浏览器默认行为"><span class="toc-number">1.7.4.</span> <span class="toc-text">处理浏览器默认行为</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#单向数据绑定"><span class="toc-number">1.7.5.</span> <span class="toc-text">单向数据绑定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-Helper"><span class="toc-number">1.8.</span> <span class="toc-text">Input Helper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Helper"><span class="toc-number">1.9.</span> <span class="toc-text">Development Helper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#log"><span class="toc-number">1.9.1.</span> <span class="toc-text">log</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#debug"><span class="toc-number">1.9.2.</span> <span class="toc-text">debug</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写自己的helper"><span class="toc-number">1.10.</span> <span class="toc-text">写自己的helper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#helper命名"><span class="toc-number">1.10.1.</span> <span class="toc-text">helper命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#helper的参数"><span class="toc-number">1.10.2.</span> <span class="toc-text">helper的参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命名参数"><span class="toc-number">1.10.3.</span> <span class="toc-text">命名参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤helper里返回的HTML"><span class="toc-number">1.11.</span> <span class="toc-text">过滤helper里返回的HTML</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&text=Ember初步--Template"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&is_video=false&description=Ember初步--Template"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ember初步--Template&body=Check out this article: http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&title=Ember初步--Template"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/ember/Ember初步--Template/&name=Ember初步--Template&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 ecmadao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    <script src="/Coding-Guide/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/Coding-Guide/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'ecmadao-blog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
