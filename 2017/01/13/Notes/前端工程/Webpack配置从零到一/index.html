<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Table of Contents  generated with DocToc

Webpack配置从零到一
setup
basic config
loaders
install css/less/style loader
install url loader
install babel loader
config loaders


plugin
ExtractTextPlugin分离CS">
<meta property="og:type" content="article">
<meta property="og:title" content="Webpack配置从零到一">
<meta property="og:url" content="http://ecmadao.com/2017/01/13/Notes/前端工程/Webpack配置从零到一/index.html">
<meta property="og:site_name" content="ecmadao">
<meta property="og:description" content="Table of Contents  generated with DocToc

Webpack配置从零到一
setup
basic config
loaders
install css/less/style loader
install url loader
install babel loader
config loaders


plugin
ExtractTextPlugin分离CS">
<meta property="og:updated_time" content="2017-01-14T12:11:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Webpack配置从零到一">
<meta name="twitter:description" content="Table of Contents  generated with DocToc

Webpack配置从零到一
setup
basic config
loaders
install css/less/style loader
install url loader
install babel loader
config loaders


plugin
ExtractTextPlugin分离CS">
    
    
        
          
              <link rel="shortcut icon" href="/Coding-Guide/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/Coding-Guide/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/Coding-Guide/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Webpack配置从零到一</title>
    <!-- styles -->
    <link rel="stylesheet" href="/Coding-Guide/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/Coding-Guide/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/Coding-Guide/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/Coding-Guide/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/Coding-Guide/lib/jquery/jquery.min.js"></script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/Coding-Guide/2017/01/13/Notes/前端工程/Github-API记录/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/Coding-Guide/2017/01/13/Notes/前端工程/linode服务器配置记录/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&text=Webpack配置从零到一"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&is_video=false&description=Webpack配置从零到一"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Webpack配置从零到一&body=Check out this article: http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&name=Webpack配置从零到一&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack配置从零到一"><span class="toc-number">1.</span> <span class="toc-text">Webpack配置从零到一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setup"><span class="toc-number">1.1.</span> <span class="toc-text">setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#basic-config"><span class="toc-number">1.2.</span> <span class="toc-text">basic config</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loaders"><span class="toc-number">1.3.</span> <span class="toc-text">loaders</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#install-css-less-style-loader"><span class="toc-number">1.3.1.</span> <span class="toc-text">install css/less/style loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#install-url-loader"><span class="toc-number">1.3.2.</span> <span class="toc-text">install url loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#install-babel-loader"><span class="toc-number">1.3.3.</span> <span class="toc-text">install babel loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#config-loaders"><span class="toc-number">1.3.4.</span> <span class="toc-text">config loaders</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plugin"><span class="toc-number">1.4.</span> <span class="toc-text">plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ExtractTextPlugin分离CSS"><span class="toc-number">1.4.1.</span> <span class="toc-text">ExtractTextPlugin分离CSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置jQuery全局变量"><span class="toc-number">1.4.2.</span> <span class="toc-text">设置jQuery全局变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CommonsChunkPlugin抽取公共资源"><span class="toc-number">1.4.3.</span> <span class="toc-text">CommonsChunkPlugin抽取公共资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UglifyJsPlugin代码压缩混淆"><span class="toc-number">1.4.4.</span> <span class="toc-text">UglifyJsPlugin代码压缩混淆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#我要用-React"><span class="toc-number">1.5.</span> <span class="toc-text">我要用 React!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#install"><span class="toc-number">1.5.1.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#config"><span class="toc-number">1.5.2.</span> <span class="toc-text">config</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bug"><span class="toc-number">1.5.3.</span> <span class="toc-text">bug ?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#end"><span class="toc-number">1.6.</span> <span class="toc-text">end</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Webpack配置从零到一
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ecmadao</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-01-13T05:58:37.000Z" itemprop="datePublished">2017-01-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/Coding-Guide/tags/前端工程/">前端工程</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong>  <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="external">DocToc</a></em></p>
<ul>
<li><a href="#webpack%E9%85%8D%E7%BD%AE%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80">Webpack配置从零到一</a><ul>
<li><a href="#setup">setup</a></li>
<li><a href="#basic-config">basic config</a></li>
<li><a href="#loaders">loaders</a><ul>
<li><a href="#install-csslessstyle-loader">install css/less/style loader</a></li>
<li><a href="#install-url-loader">install url loader</a></li>
<li><a href="#install-babel-loader">install babel loader</a></li>
<li><a href="#config-loaders">config loaders</a></li>
</ul>
</li>
<li><a href="#plugin">plugin</a><ul>
<li><a href="#extracttextplugin%E5%88%86%E7%A6%BBcss"><code>ExtractTextPlugin</code>分离CSS</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AEjquery%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F">设置<code>jQuery</code>全局变量</a></li>
<li><a href="#commonschunkplugin%E6%8A%BD%E5%8F%96%E5%85%AC%E5%85%B1%E8%B5%84%E6%BA%90"><code>CommonsChunkPlugin</code>抽取公共资源</a></li>
<li><a href="#uglifyjsplugin%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9%E6%B7%B7%E6%B7%86"><code>UglifyJsPlugin</code>代码压缩混淆</a></li>
</ul>
</li>
<li><a href="#%E6%88%91%E8%A6%81%E7%94%A8-react">我要用 React!</a><ul>
<li><a href="#install">install</a></li>
<li><a href="#config">config</a></li>
<li><a href="#bug-">bug ?</a></li>
</ul>
</li>
<li><a href="#end">end</a></li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="Webpack配置从零到一"><a href="#Webpack配置从零到一" class="headerlink" title="Webpack配置从零到一"></a>Webpack配置从零到一</h2><blockquote>
<p>这不算是初学者的入门文章，也不能算是高端用户的进阶。这只是我自己在配置Webpack过程中收集整理的一些资料，以及自己常用的整个配置流程。因为有时候老是忘了某个东西是怎么配置的，所以记录下来用于速查和备忘。</p>
</blockquote>
<h3 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ npm init</div><div class="line">$ npm install webpack --save-dev <span class="comment"># 全局安装依赖</span></div><div class="line"><span class="comment"># or</span></div><div class="line">$ npm install webpack-dev-server --save-dev <span class="comment"># 安装webpack调试工具</span></div></pre></td></tr></table></figure>
<h3 id="basic-config"><a href="#basic-config" class="headerlink" title="basic config"></a>basic config</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/webpack.config.js</span></div><div class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 配置目录</span></div><div class="line"><span class="comment">// 因为我们的webpack.config.js文件不在项目根目录下，所以需要一个路径的配置</span></div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">const</span> CURRENT_PATH = path.resolve(__dirname); <span class="comment">// 获取到当前目录</span></div><div class="line"><span class="keyword">const</span> ROOT_PATH = path.join(__dirname, <span class="string">'../'</span>); <span class="comment">// 项目根目录</span></div><div class="line"><span class="keyword">const</span> MODULES_PATH = path.join(ROOT_PATH, <span class="string">'./node_modules'</span>); <span class="comment">// node包目录</span></div><div class="line"><span class="keyword">const</span> BUILD_PATH = path.join(ROOT_PATH, <span class="string">'./public/assets'</span>); <span class="comment">// 最后输出放置公共资源的目录</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">context</span>: CURRENT_PATH, <span class="comment">// 设置webpack配置中指向的默认目录为项目根目录</span></div><div class="line">  entry: &#123;</div><div class="line">    <span class="attr">index</span>: <span class="string">'./public/pages/index.js'</span>,</div><div class="line">    <span class="attr">public</span>: <span class="string">'./public/pages/public.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: BUILD_PATH, <span class="comment">// 设置输出目录</span></div><div class="line">    filename: <span class="string">'[name].bundle.js'</span>, <span class="comment">// 输出文件名</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.jsx'</span>, <span class="string">'.coffee'</span>] <span class="comment">// 配置简写，配置过后，书写该文件路径的时候可以省略文件后缀</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      <span class="comment">// loader 扔在这里</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    <span class="comment">// 插件扔在这里</span></div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="loaders"><a href="#loaders" class="headerlink" title="loaders"></a>loaders</h3><blockquote>
<p>没有loader怎么活！￣へ￣</p>
</blockquote>
<h4 id="install-css-less-style-loader"><a href="#install-css-less-style-loader" class="headerlink" title="install css/less/style loader"></a>install css/less/style loader</h4><p>scss-loader的配置同理less，个人比较常用less</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm install less --save-dev <span class="comment"># install less</span></div><div class="line"></div><div class="line">$ npm install css-loader style-loader --save-dev <span class="comment"># install style-loader, css-loader</span></div><div class="line"></div><div class="line">$ npm install less less-loader --save-dev <span class="comment"># 基于style-loader,css-loader</span></div></pre></td></tr></table></figure>
<h4 id="install-url-loader"><a href="#install-url-loader" class="headerlink" title="install url loader"></a>install url loader</h4><blockquote>
<p>用来处理图片和字体文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install file-loader --save-dev</div><div class="line">$ npm install url-loader --save-dev</div></pre></td></tr></table></figure>
<h4 id="install-babel-loader"><a href="#install-babel-loader" class="headerlink" title="install babel loader"></a>install babel loader</h4><blockquote>
<p>不能写ES6的js不叫js</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install babel-loader babel-core babel-preset-es2015 --save-dev</div></pre></td></tr></table></figure>
<h4 id="config-loaders"><a href="#config-loaders" class="headerlink" title="config loaders"></a>config loaders</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/webpack.config.js</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      <span class="comment">// style &amp; css &amp; less loader</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">"style-loader!css-loader"</span>&#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="attr">loader</span>: <span class="string">"style-loader!css-loader!less-loader"</span>)&#125;,</div><div class="line">      <span class="comment">// babel loader</span></div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</div><div class="line">        <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</div><div class="line">        <span class="attr">loader</span>: [<span class="string">'babel-loader'</span>],</div><div class="line">        <span class="attr">query</span>: &#123;</div><div class="line">          <span class="attr">presets</span>: [<span class="string">'es2015'</span>]</div><div class="line">          <span class="comment">// 如果安装了React的话</span></div><div class="line">          <span class="comment">// presets: ['react', 'es2015']</span></div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="comment">// image &amp; font</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)$/i</span>, <span class="attr">loader</span>: <span class="string">'url-loader?limit=8192&amp;name=[name].[ext]'</span>&#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpe?g|png|gif|svg)$/i</span>, <span class="attr">loader</span>: <span class="string">'url-loader?limit=8192&amp;name=[name].[ext]'</span>&#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h3><h4 id="ExtractTextPlugin分离CSS"><a href="#ExtractTextPlugin分离CSS" class="headerlink" title="ExtractTextPlugin分离CSS"></a><code>ExtractTextPlugin</code>分离CSS</h4><blockquote>
<p>行内插入一坨CSS是万恶之源 </p>
<p>– 我瞎扯的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># install ExtractTextPlugin</span></div><div class="line">$ npm install extract-text-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/webpack.config.js</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">    <span class="comment">// 把之前的style&amp;css&amp;less loader改为</span></div><div class="line">    &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>)&#125;,</div><div class="line">    &#123; <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css!less'</span>) &#125;,</div><div class="line">  ]</div><div class="line">&#125;,</div><div class="line"><span class="attr">plugins</span>: [</div><div class="line">  <span class="comment">// 分离css</span></div><div class="line">  <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'[name].bundle.css'</span>, &#123;</div><div class="line">    <span class="attr">allChunks</span>: <span class="literal">true</span></div><div class="line">  &#125;),</div><div class="line">]</div></pre></td></tr></table></figure>
<h4 id="设置jQuery全局变量"><a href="#设置jQuery全局变量" class="headerlink" title="设置jQuery全局变量"></a>设置<code>jQuery</code>全局变量</h4><p><code>jQuery</code>很老土？好吧我还真有点同意你。。但无疑在一定程度上它还是很方便的。我把<code>jQuery</code>设置成全局变量，这样的话有时候就能偷懒用下它了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm install jquery --save-dev</div><div class="line"></div><div class="line"><span class="comment"># 安装 expose-loader</span></div><div class="line">$ npm install expose-loader --save-dev</div><div class="line">$ npm install exports-loader --save-dev</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/webpack.config.js</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">    <span class="comment">// expose-loader将需要的变量从依赖包中暴露出来</span></div><div class="line">    &#123; <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">"jquery"</span>), <span class="attr">loader</span>: <span class="string">"expose?$! expose?jQuery"</span> &#125;</div><div class="line">  ]</div><div class="line">&#125;,</div><div class="line"><span class="attr">plugins</span>: [</div><div class="line">  <span class="comment">// 把jquery作为全局变量插入到所有的代码中</span></div><div class="line">  <span class="comment">// 然后就可以直接在页面中使用jQuery了</span></div><div class="line">  <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">    <span class="attr">$</span>: <span class="string">'jquery'</span>,</div><div class="line">    <span class="attr">jQuery</span>: <span class="string">'jquery'</span>,</div><div class="line">    <span class="string">'window.jQuery'</span>: <span class="string">'jquery'</span></div><div class="line">  &#125;),</div><div class="line">]</div></pre></td></tr></table></figure>
<h4 id="CommonsChunkPlugin抽取公共资源"><a href="#CommonsChunkPlugin抽取公共资源" class="headerlink" title="CommonsChunkPlugin抽取公共资源"></a><code>CommonsChunkPlugin</code>抽取公共资源</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/webpack.config.js</span></div><div class="line"></div><div class="line">entry: &#123;</div><div class="line">  <span class="attr">jquery</span>: [<span class="string">'jquery'</span>]</div><div class="line">&#125;,</div><div class="line"><span class="attr">plugins</span>: [</div><div class="line">  <span class="comment">// public sources</span></div><div class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">    <span class="comment">// 与 entry 中的 jquery 对应</span></div><div class="line">    name: <span class="string">'jquery'</span>,</div><div class="line">    <span class="comment">// 输出的公共资源名称</span></div><div class="line">    filename: <span class="string">'common.bundle.js'</span>,</div><div class="line">    <span class="comment">// 对所有entry实行这个规则</span></div><div class="line">    minChunks: <span class="literal">Infinity</span></div><div class="line">  &#125;),</div><div class="line">]</div></pre></td></tr></table></figure>
<h4 id="UglifyJsPlugin代码压缩混淆"><a href="#UglifyJsPlugin代码压缩混淆" class="headerlink" title="UglifyJsPlugin代码压缩混淆"></a><code>UglifyJsPlugin</code>代码压缩混淆</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/webpack.config.js</span></div><div class="line"></div><div class="line">plugins: [</div><div class="line">  <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">    <span class="attr">mangle</span>: &#123;</div><div class="line">      <span class="attr">except</span>: [<span class="string">'$super'</span>, <span class="string">'$'</span>, <span class="string">'exports'</span>, <span class="string">'require'</span>]</div><div class="line">      <span class="comment">//以上变量‘$super’, ‘$’, ‘exports’ or ‘require’，不会被混淆</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">compress</span>: &#123;</div><div class="line">      <span class="attr">warnings</span>: <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">]</div></pre></td></tr></table></figure>
<h3 id="我要用-React"><a href="#我要用-React" class="headerlink" title="我要用 React!"></a>我要用 React!</h3><p>React + Webpack在我心里是个标配，自己也很喜欢React+Redux+Webpack那一套，所以怎么少得了它。</p>
<h4 id="install"><a href="#install" class="headerlink" title="install"></a>install</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># react</span></div><div class="line">$ npm install react --save</div><div class="line">$ npm install react-dom --save</div><div class="line"></div><div class="line"><span class="comment"># 喜欢redux?</span></div><div class="line">$ npm install --save redux <span class="comment"># redux</span></div><div class="line">$ npm install --save react-redux <span class="comment"># 和React配合</span></div><div class="line">$ npm install --save redux-thunk <span class="comment"># middleware</span></div><div class="line"></div><div class="line"><span class="comment"># 如果已经装了babel可以忽略下面这条</span></div><div class="line">$ npm install babel-loader babel-core babel-preset-es2015 --save-dev</div><div class="line"></div><div class="line"><span class="comment"># 但是要用React的话一定记得安装下面这个</span></div><div class="line">$ npm install babel-preset-react --save-dev</div></pre></td></tr></table></figure>
<h4 id="config"><a href="#config" class="headerlink" title="config"></a>config</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">loaders: [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</div><div class="line">    <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</div><div class="line">    <span class="attr">loader</span>: [<span class="string">'babel-loader'</span>],</div><div class="line">    <span class="attr">query</span>: &#123;</div><div class="line">      <span class="attr">presets</span>: [<span class="string">'react'</span>, <span class="string">'es2015'</span>]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<h4 id="bug"><a href="#bug" class="headerlink" title="bug ?"></a>bug ?</h4><p>在最新的React(V15)里，如果你按照上面的配置正常使用的话，应该会出现如下的警告：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Warning: It looks like you&apos;re using a minified copy of the development build of React. When deploying React apps to production, make sure to use the production build which skips development warnings and is faster. See https://fb.me/react-minification for more details.</div></pre></td></tr></table></figure>
<p>我记得以前的版本没有这个警告啊？我在开发环境压缩它了？那把<code>UglifyJsPlugin</code>拿走试试。。结果还是一样。</p>
<p>最后在<a href="https://github.com/facebook/react/issues/6479" target="_blank" rel="external">github React-issue</a>找到了目前的解决方案：</p>
<p>在Webpack的plugins里添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">  <span class="string">"process.env"</span>: &#123; </div><div class="line">     <span class="attr">NODE_ENV</span>: <span class="built_in">JSON</span>.stringify(<span class="string">"production"</span>) </div><div class="line">   &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>然后就没问题了==</p>
<h3 id="end"><a href="#end" class="headerlink" title="end"></a>end</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 运行</span></div><div class="line">$ webpack --config config/webpack.config.js -p --display-reasons --display-chunks --progress --colors --profile --display-modules</div></pre></td></tr></table></figure>
<p>可以在package.json里面配置一下运行命令</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line">    "build": "webpack --config config/webpack.config.js -p --display-reasons --display-chunks --progress --colors --profile --display-modules"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果真的要玩的话，webpack可以有非常多的玩法（看看它插件就知道了）。但webpack终究是一个工具，所以也就没有特别深入探究它，知道怎么用，够用就好了。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack配置从零到一"><span class="toc-number">1.</span> <span class="toc-text">Webpack配置从零到一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setup"><span class="toc-number">1.1.</span> <span class="toc-text">setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#basic-config"><span class="toc-number">1.2.</span> <span class="toc-text">basic config</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loaders"><span class="toc-number">1.3.</span> <span class="toc-text">loaders</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#install-css-less-style-loader"><span class="toc-number">1.3.1.</span> <span class="toc-text">install css/less/style loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#install-url-loader"><span class="toc-number">1.3.2.</span> <span class="toc-text">install url loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#install-babel-loader"><span class="toc-number">1.3.3.</span> <span class="toc-text">install babel loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#config-loaders"><span class="toc-number">1.3.4.</span> <span class="toc-text">config loaders</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plugin"><span class="toc-number">1.4.</span> <span class="toc-text">plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ExtractTextPlugin分离CSS"><span class="toc-number">1.4.1.</span> <span class="toc-text">ExtractTextPlugin分离CSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置jQuery全局变量"><span class="toc-number">1.4.2.</span> <span class="toc-text">设置jQuery全局变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CommonsChunkPlugin抽取公共资源"><span class="toc-number">1.4.3.</span> <span class="toc-text">CommonsChunkPlugin抽取公共资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UglifyJsPlugin代码压缩混淆"><span class="toc-number">1.4.4.</span> <span class="toc-text">UglifyJsPlugin代码压缩混淆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#我要用-React"><span class="toc-number">1.5.</span> <span class="toc-text">我要用 React!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#install"><span class="toc-number">1.5.1.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#config"><span class="toc-number">1.5.2.</span> <span class="toc-text">config</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bug"><span class="toc-number">1.5.3.</span> <span class="toc-text">bug ?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#end"><span class="toc-number">1.6.</span> <span class="toc-text">end</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&text=Webpack配置从零到一"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&is_video=false&description=Webpack配置从零到一"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Webpack配置从零到一&body=Check out this article: http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&title=Webpack配置从零到一"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ecmadao.com/Coding-Guide/2017/01/13/Notes/前端工程/Webpack配置从零到一/&name=Webpack配置从零到一&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 ecmadao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/Coding-Guide/">Home</a></li>
         
          <li><a href="/Coding-Guide/about/">About</a></li>
         
          <li><a href="/Coding-Guide/archives/">Articles</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    <script src="/Coding-Guide/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/Coding-Guide/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'ecmadao-blog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
